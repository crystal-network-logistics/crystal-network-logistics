{"version":3,"file":"lazyCustomElementWrapper.inline.22e88f3f.bundle.min.js","mappings":"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","sources":["webpack:///../../custom-elements/src/elements/wixIframe/wixIframe.ts","webpack:///../../custom-elements/src/commons.ts","webpack:///../../custom-elements/src/elements/wixVideo/videoLayout.ts","webpack:///../../custom-elements/src/elements/wixVideo/wixVideo.ts","webpack:///../../custom-elements/src/elements/wixBgImage/bgImageLayout.ts","webpack:///../../custom-elements/src/elements/wixBgImage/wixBgImage.ts","webpack:///../../custom-elements/src/wixLazyCustomElementRegistry.ts","webpack:///../../custom-elements/src/elements/wixVideo/initWixVideoCustomElement.ts","webpack:///../../custom-elements/src/elements/wixIframe/initIframeCustomElements.ts","webpack:///../../custom-elements/src/elements/wixBgImage/initWixBgImageCustomElement.ts","webpack:///../../custom-elements/src/lazyCustomElementWrapper.ts","webpack:///../../custom-elements/src/utils/domUtils.ts","webpack:///../../custom-elements/src/utils/imageUtils.ts","webpack:///../../custom-elements/src/utils/utils.ts","webpack:///../../thunderbolt-environment/src/lib/prefersReducedMotion.ts"],"sourcesContent":["// @ts-nocheck\nfunction wixIframeWrapper(WixElement): any {\n\tclass WixIframe extends WixElement {\n\t\t// eslint-disable-next-line @typescript-eslint/no-useless-constructor\n\t\tconstructor() {\n\t\t\t// eslint-disable-line no-useless-constructor\n\t\t\tsuper()\n\t\t}\n\n\t\treLayout() {\n\t\t\t// TODO - add lazy loading if bv_lazyTPAs experiment is merged\n\t\t\t// TODO - handle instance templating from clientSpecMap once we implement static html loading\n\t\t\tconst iframe = this.querySelector('iframe')\n\t\t\tif (iframe) {\n\t\t\t\tconst dataSrc = iframe.dataset.src\n\t\t\t\tif (dataSrc && iframe.src !== dataSrc) {\n\t\t\t\t\tiframe.src = dataSrc\n\t\t\t\t\tiframe.dataset.src = ''\n\t\t\t\t\tthis.dataset.src = ''\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tattributeChangedCallback(name, oldValue, newValue) {\n\t\t\tif (newValue) {\n\t\t\t\tthis.reLayout()\n\t\t\t}\n\t\t}\n\n\t\tstatic get observedAttributes() {\n\t\t\treturn ['data-src']\n\t\t}\n\t}\n\n\treturn WixIframe\n}\n\nexport default wixIframeWrapper\n","// @ts-nocheck\nexport const defineCustomElement = (contextWindow, elementName, elementClass) => {\n\tif (contextWindow.customElements.get(elementName) === undefined) {\n\t\tcontextWindow.customElements.define(elementName, elementClass)\n\t}\n}\n","// @ts-nocheck\n\nimport { joinURL, unique } from '../../utils/utils'\nimport { fittingTypeToObjectFit } from '../../utils/domUtils'\nimport { setStyle } from '../../utils/customElementsCommonUtils'\nimport { fittingTypes } from '@wix/image-kit'\n\nexport default {\n\t/**\n\t * @param {HTMLVideoElement} videoNode\n\t * @param {HTMLDivElement} container\n\t * @param {boolean} hasBgScrollEffect\n\t * @param {number} videoWidth\n\t * @param {number} videoHeight\n\t * @param {string} fittingType\n\t * @param {string} alignType\n\t * @param {Object[]} qualities\n\t * @param {string} staticVideoUrl\n\t * @param {string} videoId\n\t * @param {string} videoFormat\n\t * @param {{x: number, y:number}} focalPoint\n\t * @return {{currentSrc: string, videoStyle: {top: number, left: number, width: number, height: number}, videoSourceUrl: string}}\n\t */\n\tmeasure(\n\t\tvideoNode,\n\t\tcontainer,\n\t\t{\n\t\t\thasBgScrollEffect,\n\t\t\tvideoWidth,\n\t\t\tvideoHeight,\n\t\t\tfittingType,\n\t\t\talignType = 'center',\n\t\t\tqualities,\n\t\t\tstaticVideoUrl,\n\t\t\tvideoId,\n\t\t\tvideoFormat,\n\t\t\tfocalPoint,\n\t\t}\n\t) {\n\t\t// if background has a full-height scroll effect we use the parent width,\n\t\t// the element position is fixed and without explicit width it will take\n\t\t// the viewport's width or the width of an ancestor with a transform (i.e. page in transition)\n\t\tconst width = hasBgScrollEffect ? container.offsetWidth : videoNode.parentElement.offsetWidth\n\t\tconst height = videoNode.parentElement.offsetHeight\n\t\tconst vidWidth = parseInt(videoWidth, 10)\n\t\tconst vidHeight = parseInt(videoHeight, 10)\n\t\tconst scaleFactor = getScaleFactor(width, height, vidWidth, vidHeight)\n\t\tconst videoScaledDimensions = getVideoDimension(fittingType, scaleFactor, vidWidth, vidHeight)\n\t\tconst targetQuality = getVideoQualityBySize(qualities, videoScaledDimensions)\n\n\t\tconst videoSourceUrl = getMP4Url(targetQuality, staticVideoUrl, videoId, videoFormat)\n\t\tconst needsSrcUpdate = shouldUpdateSrc(videoNode, videoSourceUrl)\n\t\tconst objectFit = fittingTypeToObjectFit[fittingType] || 'cover'\n\t\tconst focalPosition = focalPoint\n\t\t\t? convertFillFocalToPosition(videoScaledDimensions, { width, height }, focalPoint)\n\t\t\t: ''\n\t\tconst alignTypeString = alignType.replace('_', ' ')\n\t\treturn {\n\t\t\tvideoSourceUrl,\n\t\t\tneedsSrcUpdate,\n\t\t\tvideoStyle: {\n\t\t\t\theight: '100%',\n\t\t\t\twidth: '100%',\n\t\t\t\tobjectFit,\n\t\t\t\tobjectPosition: focalPosition ? focalPosition : alignTypeString,\n\t\t\t},\n\t\t}\n\t},\n\t/**\n\t * @param {HTMLDivElement} poster\n\t * @param {HTMLCanvasElement|null} canvas\n\t * @param {HTMLVideoElement} videoNode\n\t * @param {Object} videoStyle\n\t * @param {boolean} autoPlay\n\t * @param {string} videoSourceUrl\n\t * @param {boolean} needsSrcUpdate\n\t * @param {string} animatePoster\n\t * @param {string} videoFormat\n\t * @param {number} playbackRate\n\t * @param {boolean} isEditorMode\n\t */\n\tmutate(\n\t\tposter,\n\t\tcanvas,\n\t\tvideoNode,\n\t\tvideoStyle,\n\t\tautoPlay,\n\t\tvideoSourceUrl,\n\t\tneedsSrcUpdate,\n\t\tanimatePoster,\n\t\tvideoFormat,\n\t\tplaybackRate,\n\t\tisEditorMode\n\t) {\n\t\tif (canvas) {\n\t\t\tsetStyle(canvas, videoStyle)\n\t\t} else {\n\t\t\thandlePosterVisibility(needsSrcUpdate, videoNode, poster, animatePoster, autoPlay, isEditorMode)\n\n\t\t\tif (autoPlay) {\n\t\t\t\tvideoNode.setAttribute('autoplay', '')\n\t\t\t} else {\n\t\t\t\tvideoNode.removeAttribute('autoplay')\n\t\t\t}\n\n\t\t\tsetStyle(videoNode, videoStyle)\n\t\t}\n\n\t\tpatchVideoSource(needsSrcUpdate, videoNode, videoSourceUrl)\n\t\tvideoNode.playbackRate = playbackRate\n\t},\n}\n\n/**\n *\n * @param videoNode\n * @param newSrcUrl\n * @returns {*|boolean}\n */\nfunction shouldUpdateSrc(videoNode, newSrcUrl) {\n\tconst hasError = videoNode.networkState === videoNode.NETWORK_NO_SOURCE\n\tconst hasDiff = !videoNode.currentSrc.endsWith(newSrcUrl)\n\treturn newSrcUrl && (hasDiff || hasError)\n}\n\n/**\n * Calculate width and height of video's\n * visible rect according to provided `fittingType`.\n *\n * @param {string} fittingType\n * @param {{wScale: number, hScale: number}} videoScale\n * @param {number} videoWidth\n * @param {number} videoHeight\n * @return {{width: number, height: number}}\n */\nfunction getVideoDimension(fittingType, videoScale, videoWidth, videoHeight) {\n\tlet scale\n\n\tif (fittingType === fittingTypes.SCALE_TO_FIT) {\n\t\tscale = Math.min(videoScale.wScale, videoScale.hScale)\n\t} else {\n\t\t// default: fittingTypes.SCALE_TO_FILL\n\t\tscale = Math.max(videoScale.wScale, videoScale.hScale)\n\t}\n\n\treturn {\n\t\twidth: Math.round(videoWidth * scale),\n\t\theight: Math.round(videoHeight * scale),\n\t}\n}\n\n/**\n * Calculate ratio between video's width and height, and its container's.\n *\n * @param {number} containerWidth\n * @param {number} containerHeight\n * @param {number} videoWidth\n * @param {number} videoHeight\n * @return {{wScale: number, hScale: number}}\n */\nfunction getScaleFactor(containerWidth, containerHeight, videoWidth, videoHeight) {\n\treturn {\n\t\twScale: containerWidth / videoWidth,\n\t\thScale: containerHeight / videoHeight,\n\t}\n}\n\n/**\n * Pick the desired video quality from a list of given qualities\n * according to visible rect dimensions.\n *\n * @param {Object[]} qualities\n * @param {{width: number, height: number}} videoScaledDimensions\n * @return {Object} the quality to use\n */\nfunction getVideoQualityBySize(qualities, { width, height }) {\n\tconst uniqueQualities = unique(qualities, (item) => item.size)\n\tconst targetQuality = uniqueQualities.find((value) => value.size > width * height)\n\n\treturn targetQuality || qualities[qualities.length - 1]\n}\n\n/**\n * Get a full URL for the video if playing MP4 format, or empty string otherwise.\n *\n * @param {Object} targetQuality\n * @param {string} staticVideoUrl\n * @param {string} videoId\n * @param {string} videoFormat\n * @returns {string}\n */\nfunction getMP4Url(targetQuality, staticVideoUrl, videoId, videoFormat) {\n\tif (videoFormat === 'mp4') {\n\t\t// prefer video URL from new design data structure\n\t\tif (targetQuality.url) {\n\t\t\treturn joinURL(staticVideoUrl, targetQuality.url)\n\t\t}\n\t\t// build URL from videoId\n\t\treturn joinURL(staticVideoUrl, videoId, targetQuality.quality, videoFormat, 'file.mp4')\n\t}\n\n\treturn ''\n}\n\n/**\n *\n * @param {boolean} needsEventUpdate\n * @param {HTMLVideoElement} videoNode\n * @param {HTMLDivElement} posterNode\n * @param {string} animatePoster\n * @param {boolean} autoplay\n * @param {boolean} isEditorMode\n */\nfunction handlePosterVisibility(needsEventUpdate, videoNode, posterNode, animatePoster, autoplay, isEditorMode) {\n\t// todo: (preview -> Editor case) move to editor layout hooks\n\t// bring back the poster (preview -> Editor case)\n\tif (isEditorMode && videoNode.paused) {\n\t\tposterNode.style.opacity = '1'\n\t\tvideoNode.style.opacity = '0'\n\t}\n\t// todo: (preview -> Editor case) move to editor layout hooks\n\t// register to events when updating src or when in Editor(preview -> Editor case)\n\tconst isPausedOrEmpty = videoNode.paused || videoNode.currentSrc === ''\n\tconst needsEventUpdateWithEditor = needsEventUpdate || isEditorMode\n\tif (needsEventUpdateWithEditor && isPausedOrEmpty) {\n\t\tvideoNode.ontimeupdate = null\n\t\tvideoNode.onseeked = null\n\t\tvideoNode.onplay = null\n\t\tif (!isEditorMode && autoplay) {\n\t\t\tconst muteState = videoNode.muted\n\t\t\tvideoNode.muted = true\n\t\t\t// sync the poster removal with video first frame\n\t\t\tvideoNode.ontimeupdate = () => {\n\t\t\t\tif (videoNode.currentTime > 0) {\n\t\t\t\t\tvideoNode.ontimeupdate = null\n\t\t\t\t\tvideoNode.onseeked = () => {\n\t\t\t\t\t\tvideoNode.onseeked = null\n\t\t\t\t\t\tvideoNode.muted = muteState\n\t\t\t\t\t\tremovePoster(videoNode, posterNode, animatePoster)\n\t\t\t\t\t}\n\t\t\t\t\tvideoNode.currentTime = 0\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvideoNode.onplay = () => {\n\t\t\t\tif (!isEditorMode) {\n\t\t\t\t\tvideoNode.onplay = null\n\t\t\t\t}\n\t\t\t\tremovePoster(videoNode, posterNode, animatePoster)\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Load the video if needed.\n *\n * @param {boolean} needsSrcUpdate\n * @param {HTMLVideoElement} videoNode\n * @param {string} newSrc\n */\nfunction patchVideoSource(needsSrcUpdate, videoNode, newSrc) {\n\tif (needsSrcUpdate) {\n\t\tvideoNode.src = newSrc\n\t\tvideoNode.load()\n\t}\n}\n\n/**\n * Show video , hide poster\n *\n * @param videoNode\n * @param posterNode\n * @param animatePoster\n */\nfunction removePoster(videoNode, posterNode, animatePoster) {\n\tif (animatePoster === 'fade') {\n\t\tposterNode.style.transition = 'opacity 1.6s ease-out'\n\t}\n\tposterNode.style.opacity = '0'\n\tvideoNode.style.opacity = '1'\n}\n\n/**\n *\n * @param {{width: number, height: number}} src source dimensions\n * @param {{width: number, height: number}} target target dimensions\n * @param {{x: number, y: number}} focalPoint x/y as 0-100 percentages\n * @returns {string} in 'x% y%' format\n */\nfunction convertFillFocalToPosition(src, target, focalPoint) {\n\tconst { width: sW, height: sH } = src\n\tconst { width: tW, height: tH } = target\n\tconst { x: fpX, y: fpY } = focalPoint\n\n\tif (!tW || !tH) {\n\t\treturn `${fpX}% ${fpY}%`\n\t}\n\n\tconst fillScaleFactor = Math.max(tW / sW, tH / sH)\n\n\tconst imgScaledW = sW * fillScaleFactor\n\tconst imgScaledH = sH * fillScaleFactor\n\n\tconst x = Math.max(0, Math.min(imgScaledW - tW, imgScaledW * (fpX / 100) - tW / 2))\n\tconst y = Math.max(0, Math.min(imgScaledH - tH, imgScaledH * (fpY / 100) - tH / 2))\n\n\tconst posX = x && Math.floor((x / (imgScaledW - tW)) * 100)\n\tconst posY = y && Math.floor((y / (imgScaledH - tH)) * 100)\n\n\treturn `${posX}% ${posY}%`\n}\n","// @ts-nocheck\n\nimport videoLayout from './videoLayout'\n\nfunction wixVideoWrapper(WixElement, services, environmentConsts, contextWindow = window): any {\n\tclass wixVideo extends WixElement {\n\t\t// eslint-disable-next-line @typescript-eslint/no-useless-constructor\n\t\tconstructor() {\n\t\t\t// eslint-disable-line no-useless-constructor\n\t\t\tsuper()\n\t\t}\n\n\t\treLayout() {\n\t\t\tconst {\n\t\t\t\tisVideoDataExists,\n\t\t\t\tvideoWidth,\n\t\t\t\tvideoHeight,\n\t\t\t\tqualities,\n\t\t\t\tvideoId,\n\t\t\t\tvideoFormat,\n\t\t\t\talignType,\n\t\t\t\tfittingType,\n\t\t\t\tfocalPoint,\n\t\t\t\thasBgScrollEffect,\n\t\t\t\tautoPlay,\n\t\t\t\tanimatePoster,\n\t\t\t\tcontainerId,\n\t\t\t\tisEditorMode,\n\t\t\t\tplaybackRate,\n\t\t\t\thasAlpha,\n\t\t\t} = JSON.parse(this.dataset.videoInfo)\n\n\t\t\tif (!isVideoDataExists) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst autoPlayAllowed = !environmentConsts.prefersReducedMotion && autoPlay\n\n\t\t\tconst videoNode = this.querySelector(`video[id^=\"${containerId}\"]`)\n\t\t\tconst poster = this.querySelector(`.bgVideoposter[id^=\"${containerId}\"]`)\n\n\t\t\t// if observed for missing video/poster, first cleanup, otherwise it's a noop\n\t\t\tthis.unobserveChildren()\n\n\t\t\tif (!(videoNode && poster)) {\n\t\t\t\tthis.observeChildren(this)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst container = contextWindow.document.getElementById(`${containerId}`)\n\t\t\tconst canvas = container.querySelector(`.webglcanvas[id^=\"${containerId}\"]`)\n\t\t\tconst hasThunderBoltCanvas = hasAlpha || container.dataset.hasAlpha === 'true'\n\n\t\t\tif (hasThunderBoltCanvas && !canvas) {\n\t\t\t\trequestAnimationFrame(() => this.reLayout())\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tservices.mutationService.measure(() => {\n\t\t\t\tconst measures = videoLayout.measure(videoNode, container, {\n\t\t\t\t\thasBgScrollEffect,\n\t\t\t\t\tvideoWidth,\n\t\t\t\t\tvideoHeight,\n\t\t\t\t\tfittingType,\n\t\t\t\t\talignType,\n\t\t\t\t\tqualities,\n\t\t\t\t\tstaticVideoUrl: environmentConsts.staticVideoUrl,\n\t\t\t\t\tvideoId,\n\t\t\t\t\tvideoFormat,\n\t\t\t\t\tfocalPoint,\n\t\t\t\t})\n\n\t\t\t\tconst { videoSourceUrl, needsSrcUpdate, videoStyle } = measures\n\t\t\t\tservices.mutationService.mutate(() => {\n\t\t\t\t\tvideoLayout.mutate(\n\t\t\t\t\t\tposter,\n\t\t\t\t\t\tcanvas,\n\t\t\t\t\t\tvideoNode,\n\t\t\t\t\t\tvideoStyle,\n\t\t\t\t\t\tautoPlayAllowed,\n\t\t\t\t\t\tvideoSourceUrl,\n\t\t\t\t\t\tneedsSrcUpdate,\n\t\t\t\t\t\tanimatePoster,\n\t\t\t\t\t\tvideoFormat,\n\t\t\t\t\t\tplaybackRate,\n\t\t\t\t\t\tisEditorMode\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\tattributeChangedCallback(name, oldValue) {\n\t\t\tif (oldValue) {\n\t\t\t\tthis.reLayout()\n\t\t\t}\n\t\t}\n\n\t\tstatic get observedAttributes() {\n\t\t\treturn ['data-video-info']\n\t\t}\n\t}\n\n\treturn wixVideo\n}\n\nexport default wixVideoWrapper\n","// @ts-nocheck\n\nimport { getImageComputedProperties, setStyle, getScreenHeight } from '../../utils/customElementsCommonUtils'\n\nfunction didImageChange(currentImageUrlCss = '', newUrl) {\n\treturn !currentImageUrlCss.includes(newUrl) || !!currentImageUrlCss !== !!newUrl\n}\n\nconst init = (contextWindow = window) => {\n\tfunction setBackground(domNode, imageTransformData) {\n\t\tconst elementStyleAndUrl = {\n\t\t\tbackgroundImage: `url(\"${imageTransformData.uri}\")`,\n\t\t\t...imageTransformData.css.container,\n\t\t}\n\t\tconst image = new contextWindow.Image()\n\n\t\timage.onload = setStyle.bind(null, domNode, elementStyleAndUrl)\n\t\timage.src = imageTransformData.uri\n\t}\n\n\tfunction measure(id, measures, domNodes, { containerId, bgEffectName }, services) {\n\t\tconst bgImage = domNodes[id]\n\t\tconst container = domNodes[containerId]\n\t\tconst { width, height } = services.getMediaDimensionsByEffect(\n\t\t\tbgEffectName,\n\t\t\tcontainer.offsetWidth,\n\t\t\tcontainer.offsetHeight,\n\t\t\tgetScreenHeight(services.getScreenHeightOverride?.())\n\t\t)\n\n\t\tmeasures.width = width\n\t\tmeasures.height = height\n\t\tmeasures.currentSrc = bgImage.style.backgroundImage\n\t\tmeasures.bgEffectName = bgImage.dataset.bgEffectName\n\t}\n\n\tfunction patch(id, measures, domNodes, imageInfo, envConsts) {\n\t\tconst bgImage = domNodes[id]\n\t\timageInfo.targetWidth = measures.width\n\t\timageInfo.targetHeight = measures.height\n\t\tconst imageTransformData = getImageComputedProperties(imageInfo, envConsts, 'bg')\n\n\t\tif (didImageChange(measures.currentSrc, imageTransformData.uri)) {\n\t\t\tsetBackground(bgImage, imageTransformData)\n\t\t} else {\n\t\t\tsetStyle(bgImage, imageTransformData.css.container)\n\t\t}\n\t}\n\n\treturn {\n\t\tmeasure,\n\t\tpatch,\n\t}\n}\n\nexport { init }\n","// @ts-nocheck\n\nimport { init as initBgImageLayout } from './bgImageLayout'\nimport { shouldStopImageLoad } from '../../utils/customElementsCommonUtils'\n\nfunction wixBgImageWrapper(WixElement, services, environmentConsts, contextWindow = window): any {\n\tconst bgImageLayout = initBgImageLayout(contextWindow)\n\n\tclass WixBgImage extends WixElement {\n\t\t// eslint-disable-next-line @typescript-eslint/no-useless-constructor\n\t\tconstructor() {\n\t\t\t// eslint-disable-line no-useless-constructor\n\t\t\tsuper()\n\t\t}\n\n\t\treLayout() {\n\t\t\t// todo: temp experiment for measuring purposes, should be removed after test results\n\t\t\tif (shouldStopImageLoad(services)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst domNodes = {}\n\t\t\tconst measures = {}\n\n\t\t\tconst imageId = this.getAttribute('id')\n\t\t\tconst imageInfo = JSON.parse(this.dataset.tiledImageInfo)\n\t\t\tconst { bgEffectName } = this.dataset\n\t\t\tconst { containerId } = imageInfo\n\t\t\tconst container = contextWindow.document.getElementById(containerId)\n\n\t\t\tdomNodes[imageId] = this\n\t\t\tdomNodes[containerId] = container\n\t\t\timageInfo.displayMode = imageInfo.imageData.displayMode\n\n\t\t\tservices.mutationService.measure(() => {\n\t\t\t\tbgImageLayout.measure(imageId, measures, domNodes, { containerId, bgEffectName }, services)\n\t\t\t})\n\n\t\t\tservices.mutationService.mutate(() => {\n\t\t\t\tbgImageLayout.patch(imageId, measures, domNodes, imageInfo, environmentConsts, services)\n\t\t\t})\n\t\t}\n\n\t\tattributeChangedCallback(name, oldValue) {\n\t\t\tif (oldValue) {\n\t\t\t\tthis.reLayout()\n\t\t\t}\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tsuper.disconnectedCallback()\n\t\t}\n\n\t\tstatic get observedAttributes() {\n\t\t\treturn ['data-tiled-image-info']\n\t\t}\n\t}\n\n\treturn WixBgImage\n}\n\nexport default wixBgImageWrapper\n","// @ts-nocheck\nimport { initWixIframe } from './elements/wixIframe/initIframeCustomElements'\nimport { defineWixVideo } from './elements/wixVideo/initWixVideoCustomElement'\nimport { defineWixBgImage } from './elements/wixBgImage/initWixBgImageCustomElement'\nimport { prefersReducedMotion } from '@wix/thunderbolt-environment'\n\nexport const initLazyCustomElements = (contextWindow?: any = window) => {\n\tconst {\n\t\tWixElement,\n\t\tmediaServices,\n\t\tenvironmentConsts,\n\t\trequestUrl,\n\t\tstaticVideoUrl,\n\t} = contextWindow.customElementNamespace\n\n\tdefineWixVideo(WixElement, contextWindow, mediaServices, {\n\t\t...environmentConsts,\n\t\tprefersReducedMotion: prefersReducedMotion(window, requestUrl),\n\t\tstaticVideoUrl,\n\t})\n\n\tinitWixIframe(contextWindow, WixElement)\n\tdefineWixBgImage(WixElement, contextWindow, mediaServices, environmentConsts)\n\tcontextWindow.resolveExternalsRegistryModule('imageClientApi')\n}\n","// @ts-nocheck\nimport wixVideoWrapper from './wixVideo'\nimport { defineCustomElement } from '../../commons'\n\nexport const defineWixVideo = (WixElement, contextWindow, externalServices, environmentConsts) => {\n\tconst WixVideo = wixVideoWrapper(WixElement, externalServices, environmentConsts, contextWindow)\n\tdefineCustomElement(contextWindow, 'wix-video', WixVideo)\n}\n","// @ts-nocheck\nimport wixIframeWrapper from './wixIframe'\nimport { defineCustomElement } from '../../commons'\n\nexport const initWixIframe = (contextWindow, WixElement) => {\n\t// WixElement saved on window in wixCustomElementsRegistry, which runs before initializing\n\tconst WixIframe = wixIframeWrapper(WixElement)\n\tdefineCustomElement(contextWindow, 'wix-iframe', WixIframe)\n}\n","// @ts-nocheck\nimport wixBgImageWrapper from './wixBgImage'\nimport { defineCustomElement } from '../../commons'\n\nexport const defineWixBgImage = (WixElement, contextWindow, externalServices, environmentConsts) => {\n\tconst WixBgImage = wixBgImageWrapper(WixElement, externalServices, environmentConsts, contextWindow)\n\tdefineCustomElement(contextWindow, 'wix-bg-image', WixBgImage)\n}\n","import { initLazyCustomElements } from './wixLazyCustomElementRegistry'\n\ninitLazyCustomElements()\n","// @ts-nocheck\n\nconst CSS_NUMERIC_VALUES = { columnCount: 1, columns: 1, fontWeight: 1, lineHeight: 1, opacity: 1, zIndex: 1, zoom: 1 }\n\nconst addDefaultUnitIfNeeded = (prop, value) =>\n\ttypeof value === 'number' && !CSS_NUMERIC_VALUES[prop] ? `${value}px` : value\n\nconst setAttributes = (node, attributes) =>\n\tnode && attributes && Object.keys(attributes).forEach((attr) => node.setAttribute(attr, attributes[attr]))\n\nconst setStyle = (node, styleProperties) =>\n\tnode &&\n\tstyleProperties &&\n\tObject.keys(styleProperties).forEach((prop) => {\n\t\tconst propValue = styleProperties[prop]\n\t\tif (propValue !== undefined) {\n\t\t\tnode.style[prop] = addDefaultUnitIfNeeded(prop, propValue)\n\t\t} else {\n\t\t\tnode.style.removeProperty(prop)\n\t\t}\n\t})\n\nconst setCssVars = (node, cssVars) =>\n\tnode &&\n\tcssVars &&\n\tObject.keys(cssVars).forEach((prop) => {\n\t\tnode.style.setProperty(prop, cssVars[prop])\n\t})\n\n// 'true'  => true\n// 'false' => false\n// 'null'  => null\n// '42'    => 42\n// '42.5'  => 42.5\n// '08'    => '08'\n// String  => self\nconst deserializeValue = (value) => {\n\tif (!value) {\n\t\treturn value\n\t}\n\n\tif (value === 'true') {\n\t\treturn true\n\t}\n\n\tif (value === 'false') {\n\t\treturn false\n\t}\n\n\tif (value === 'null') {\n\t\treturn null\n\t}\n\n\tif (`${+value}` === value) {\n\t\treturn +value\n\t}\n\n\treturn value\n}\n\nconst getData = (node, key, shouldDeserializeVal = true) =>\n\tnode && shouldDeserializeVal ? deserializeValue(node.dataset[key]) : node.dataset[key]\n\nconst setData = (node, datasetOverrides) => node && datasetOverrides && Object.assign(node.dataset, datasetOverrides)\n\nconst getScreenHeight = (getterOverride?: number) => {\n\treturn getterOverride || document.documentElement.clientHeight || window.innerHeight || 0\n}\n\nconst getDocumentScrollPosition = () => (window ? window.pageYOffset || document.documentElement.scrollTop : 0)\n\nconst fittingTypeToObjectFit = {\n\tfit: 'contain',\n\tfill: 'cover',\n}\n\nexport {\n\tsetAttributes,\n\tsetStyle,\n\tsetCssVars,\n\tgetData,\n\tsetData,\n\tgetScreenHeight,\n\tgetDocumentScrollPosition,\n\tfittingTypeToObjectFit,\n}\n","// @ts-nocheck\n\nimport { fittingTypes, alignTypes, getData } from '@wix/image-kit'\n\nconst getImageComputedProperties = (imageInfo, envConsts, htmlTag) => {\n\tconst { targetWidth, targetHeight, imageData, filters, displayMode = fittingTypes.SCALE_TO_FILL } = imageInfo\n\n\t// todo: CLNT-5323 , wixapp sildergallery proxy is generating image data without uri\n\tif (!targetWidth || !targetHeight || !imageData.uri) {\n\t\treturn { uri: '', css: {} }\n\t}\n\n\tconst {\n\t\twidth,\n\t\theight,\n\t\tcrop,\n\t\tname,\n\t\tfocalPoint,\n\t\tupscaleMethod,\n\t\tquality,\n\t\tdevicePixelRatio = envConsts.devicePixelRatio,\n\t} = imageData\n\tconst imageOptions = {\n\t\tfilters,\n\t\tupscaleMethod,\n\t\t...quality,\n\t}\n\n\tconst pixelAspectRatio = getDevicePixelRatio(devicePixelRatio)\n\n\tconst src = {\n\t\tid: imageData.uri,\n\t\twidth,\n\t\theight,\n\t\t...(crop && { crop }), // eslint-disable-line no-extra-parens\n\t\t...(focalPoint && { focalPoint }), // eslint-disable-line no-extra-parens\n\t\t...(name && { name }), // eslint-disable-line no-extra-parens\n\t}\n\n\tconst target = {\n\t\twidth: targetWidth,\n\t\theight: targetHeight,\n\t\thtmlTag: htmlTag || 'img',\n\t\tpixelAspectRatio,\n\t\talignment: imageInfo.alignType || alignTypes.CENTER,\n\t}\n\n\tconst imageComputedProperties = getData(displayMode, src, target, imageOptions)\n\timageComputedProperties.uri = getMediaUrlByContext(\n\t\timageComputedProperties.uri,\n\t\tenvConsts.staticMediaUrl,\n\t\tenvConsts.mediaRootUrl\n\t)\n\treturn imageComputedProperties\n}\n\nconst getMediaUrlByContext = (imageUri, staticMediaUrl, mediaRootUrl) => {\n\tconst isExternalUrl = /(^https?)|(^data)|(^blob)|(^\\/\\/)/.test(imageUri)\n\tif (isExternalUrl) {\n\t\treturn imageUri\n\t}\n\tlet path = `${staticMediaUrl}/`\n\tif (imageUri) {\n\t\tif (/^micons\\//.test(imageUri)) {\n\t\t\tpath = mediaRootUrl\n\t\t} else if (/[^.]+$/.exec(imageUri)[0] === 'ico') {\n\t\t\t// if the image is an icon then it's taken from a slightly different place\n\t\t\tpath = path.replace('media', 'ficons')\n\t\t}\n\t}\n\treturn path + imageUri\n}\n\nconst getDevicePixelRatio = (devicePixelRatio) => {\n\t// we should be able to force devicePixelRatio from url by using the query param -\n\tconst queryParams = window.location.search.split('&').map((query) => query.split('='))\n\tconst devicePixelRatioQueryParam = queryParams.find((query) => query[0].toLowerCase().includes('devicepixelratio'))\n\tconst devicePixelRatioValueForceFromUrl = devicePixelRatioQueryParam ? Number(devicePixelRatioQueryParam[1]) : null\n\treturn devicePixelRatioValueForceFromUrl || devicePixelRatio || 1\n}\n\nconst getImageSrc = (imageNode, isSvgImage) => imageNode.getAttribute(isSvgImage ? 'xlink:href' : 'src')\n\nfunction getMaskBBox(svgNode) {\n\tif (svgNode) {\n\t\tconst { type } = svgNode.dataset\n\n\t\tif (type && type !== 'ugc') {\n\t\t\tconst dataBBox = svgNode.dataset.bbox\n\n\t\t\tif (!dataBBox) {\n\t\t\t\tconst { x, y, width, height } = svgNode.getBBox()\n\n\t\t\t\treturn `${x} ${y} ${width} ${height}`\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null\n}\n\n// todo: temp experiments for measuring purposes, should be removed after test results\nfunction shouldStopImageLoad(services) {\n\treturn (\n\t\tservices.isExperimentOpen('specs.thunderbolt.tb_stop_client_images') ||\n\t\tservices.isExperimentOpen('specs.thunderbolt.final_force_webp') ||\n\t\tservices.isExperimentOpen('specs.thunderbolt.final_force_no_webp')\n\t)\n}\n\nexport { shouldStopImageLoad, getImageComputedProperties, getImageSrc, getMaskBBox }\n","// @ts-nocheck\n\nconst get = (obj, props, defVal) => {\n\tconst path = Array.isArray(props) ? props : props.split('.')\n\tconst val = path.reduce((subObj, prop) => (subObj && subObj[prop] !== undefined ? subObj[prop] : null), obj)\n\treturn val !== null ? val : defVal\n}\n\nconst pick = (obj, props) => {\n\tconst propsArr = Array.isArray(props) ? props : [props]\n\treturn propsArr.reduce((subObj, prop) => {\n\t\tconst val = get(obj, prop)\n\t\treturn val !== undefined ? Object.assign(subObj, { [prop]: val }) : subObj\n\t}, {})\n}\n\nconst findKey = (obj, predicate) => Object.keys(obj).find((key) => predicate(obj[key], key))\n\n/**\n * Return a unique Array from the input `arr` keeping the last item for each key\n * returned by `predicate(item)`\n *\n * @param {Array} arr\n * @param {function} predicate\n * @returns {Array}\n */\nconst unique = (arr, predicate) => {\n\tconst result = arr.reduce((acc, item) => {\n\t\tacc[predicate(item)] = item\n\t\treturn acc\n\t}, {})\n\n\treturn Object.values(result)\n}\n\nconst cssStringToObject = (styleStr) => {\n\tif (!styleStr || !styleStr.split) {\n\t\treturn {}\n\t}\n\n\treturn styleStr.split(';').reduce(function (ruleMap, ruleString) {\n\t\tconst rulePair = ruleString.split(':')\n\t\tif (rulePair[0] && rulePair[1]) {\n\t\t\truleMap[rulePair[0].trim()] = rulePair[1].trim()\n\t\t}\n\n\t\treturn ruleMap\n\t}, {})\n}\n\n/**\n * @param {Function} callback\n * @returns {Function}\n */\nconst throttleToAnimationFrame = (callback, contextWindow = window) => {\n\tlet throttled = false\n\n\treturn (...args) => {\n\t\tif (!throttled) {\n\t\t\tthrottled = true\n\n\t\t\tcontextWindow.requestAnimationFrame(() => {\n\t\t\t\tthrottled = false\n\t\t\t\tcallback(...args)\n\t\t\t})\n\t\t}\n\t}\n}\n\n/**\n * Join strings to a valid URL.\n *\n * {@see santa-core/santa-core-utils/src/coreUtils/core/urlUtils.js}\n * @param {...string[]} args\n * @return {string}\n */\nfunction joinURL(...args) {\n\tlet url = args[0]\n\n\tfor (let i = 1; i < args.length; ++i) {\n\t\turl = `${url.replace(/\\/$/, '')}/${args[i].replace(/^\\//, '')}`\n\t}\n\n\treturn url\n}\n\nexport { get, pick, findKey, unique, cssStringToObject, throttleToAnimationFrame, joinURL }\n","import { BrowserWindow } from '@wix/thunderbolt-symbols'\n\nexport const prefersReducedMotion = (browserWindow: BrowserWindow, requestUrl = '') => {\n\tconst shouldForce = requestUrl.toLowerCase().includes('forcereducedmotion')\n\treturn shouldForce || Boolean(browserWindow?.matchMedia('(prefers-reduced-motion: reduce)').matches)\n}\n"],"names":["WixElement","constructor","super","reLayout","iframe","this","querySelector","dataSrc","dataset","src","attributeChangedCallback","name","oldValue","newValue","observedAttributes","defineCustomElement","contextWindow","elementName","elementClass","undefined","customElements","get","define","measure","videoNode","container","hasBgScrollEffect","videoWidth","videoHeight","fittingType","alignType","qualities","staticVideoUrl","videoId","videoFormat","focalPoint","width","offsetWidth","parentElement","height","offsetHeight","vidWidth","parseInt","vidHeight","scaleFactor","containerWidth","containerHeight","wScale","hScale","getScaleFactor","videoScaledDimensions","videoScale","scale","fittingTypes","Math","min","max","round","getVideoDimension","targetQuality","uniqueQualities","item","size","find","value","length","getVideoQualityBySize","videoSourceUrl","url","quality","getMP4Url","needsSrcUpdate","newSrcUrl","hasError","networkState","NETWORK_NO_SOURCE","hasDiff","currentSrc","endsWith","shouldUpdateSrc","objectFit","focalPosition","target","sW","sH","tW","tH","x","fpX","y","fpY","fillScaleFactor","imgScaledW","imgScaledH","posX","floor","posY","convertFillFocalToPosition","alignTypeString","replace","videoStyle","objectPosition","mutate","poster","canvas","autoPlay","animatePoster","playbackRate","isEditorMode","needsEventUpdate","posterNode","autoplay","paused","style","opacity","isPausedOrEmpty","ontimeupdate","onseeked","onplay","muteState","muted","currentTime","removePoster","handlePosterVisibility","setAttribute","removeAttribute","newSrc","load","patchVideoSource","transition","services","environmentConsts","window","isVideoDataExists","containerId","hasAlpha","JSON","parse","videoInfo","autoPlayAllowed","prefersReducedMotion","unobserveChildren","observeChildren","document","getElementById","mutationService","measures","videoLayout","requestAnimationFrame","init","id","domNodes","bgEffectName","bgImage","getMediaDimensionsByEffect","getScreenHeightOverride","backgroundImage","patch","imageInfo","envConsts","targetWidth","targetHeight","imageTransformData","currentImageUrlCss","newUrl","includes","didImageChange","uri","css","domNode","elementStyleAndUrl","image","Image","onload","setBackground","bgImageLayout","imageId","getAttribute","tiledImageInfo","displayMode","imageData","disconnectedCallback","mediaServices","requestUrl","customElementNamespace","externalServices","WixVideo","wixVideo","defineWixVideo","WixIframe","wixIframe","initWixIframe","WixBgImage","wixBgImage","defineWixBgImage","resolveExternalsRegistryModule","initLazyCustomElements","CSS_NUMERIC_VALUES","columnCount","columns","fontWeight","lineHeight","zIndex","zoom","setAttributes","node","attributes","Object","keys","forEach","attr","setStyle","styleProperties","prop","propValue","addDefaultUnitIfNeeded","removeProperty","setCssVars","cssVars","setProperty","getData","key","shouldDeserializeVal","setData","datasetOverrides","assign","getScreenHeight","getterOverride","documentElement","clientHeight","innerHeight","getDocumentScrollPosition","pageYOffset","scrollTop","fittingTypeToObjectFit","fit","fill","getImageComputedProperties","htmlTag","filters","crop","upscaleMethod","devicePixelRatio","imageOptions","pixelAspectRatio","getDevicePixelRatio","alignment","alignTypes","imageComputedProperties","getMediaUrlByContext","staticMediaUrl","mediaRootUrl","imageUri","test","path","exec","devicePixelRatioQueryParam","location","search","split","map","query","toLowerCase","Number","getImageSrc","imageNode","isSvgImage","getMaskBBox","svgNode","type","bbox","getBBox","shouldStopImageLoad","isExperimentOpen","obj","props","defVal","val","Array","isArray","reduce","subObj","findKey","predicate","unique","arr","result","acc","values","cssStringToObject","styleStr","ruleMap","ruleString","rulePair","trim","throttleToAnimationFrame","callback","throttled","args","joinURL","i","browserWindow","Boolean","matchMedia","matches"],"sourceRoot":""}