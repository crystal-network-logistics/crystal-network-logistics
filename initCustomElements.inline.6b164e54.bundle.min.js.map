{"version":3,"file":"initCustomElements.inline.6b164e54.bundle.min.js","mappings":"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","sources":["webpack:///../../custom-elements/src/utils/domUtils.ts","webpack:///../../custom-elements/src/utils/imageUtils.ts","webpack:///../../custom-elements/src/utils/initResizeService.ts","webpack:///../../custom-elements/src/utils/utils.ts","webpack:///../../../src/definitions/mediaResizeMap.ts","webpack:///../../custom-elements/src/elements/wixBgMedia/wixBgMedia.ts","webpack:///../../custom-elements/src/elements/wixElement.ts","webpack:///../../custom-elements/src/elements/wixImage/imageLoader.ts","webpack:///../../custom-elements/src/elements/wixImage/imageLayout.ts","webpack:///../../custom-elements/src/elements/wixImage/imageLayoutResponsive.ts","webpack:///../../custom-elements/src/elements/wixImage/wixImage.ts","webpack:///../../custom-elements/src/wixCustomElementsRegistry.ts","webpack:///../../custom-elements/src/shims/native-shim.ts","webpack:///../../custom-elements/src/index.ts","webpack:///../../../node_modules/@wix/image/dist/esm/custom-element/utils.js","webpack:///../../../node_modules/@wix/image/dist/esm/custom-element/ImageLoader.js","webpack:///../../../node_modules/@wix/image/dist/esm/custom-element/imageLayout.js","webpack:///../../../node_modules/@wix/image/dist/esm/custom-element/WowImage.js","webpack:///../../../node_modules/@wix/image/dist/esm/customElementInit.js","webpack:///../../../node_modules/@wix/image/dist/esm/custom-element/registry.js","webpack:///../../thunderbolt-custom-elements/src/index.ts","webpack:///./custom-elements/initCustomElementsWrapper.ts"],"sourcesContent":["// @ts-nocheck\n\nconst CSS_NUMERIC_VALUES = { columnCount: 1, columns: 1, fontWeight: 1, lineHeight: 1, opacity: 1, zIndex: 1, zoom: 1 }\n\nconst addDefaultUnitIfNeeded = (prop, value) =>\n\ttypeof value === 'number' && !CSS_NUMERIC_VALUES[prop] ? `${value}px` : value\n\nconst setAttributes = (node, attributes) =>\n\tnode && attributes && Object.keys(attributes).forEach((attr) => node.setAttribute(attr, attributes[attr]))\n\nconst setStyle = (node, styleProperties) =>\n\tnode &&\n\tstyleProperties &&\n\tObject.keys(styleProperties).forEach((prop) => {\n\t\tconst propValue = styleProperties[prop]\n\t\tif (propValue !== undefined) {\n\t\t\tnode.style[prop] = addDefaultUnitIfNeeded(prop, propValue)\n\t\t} else {\n\t\t\tnode.style.removeProperty(prop)\n\t\t}\n\t})\n\nconst setCssVars = (node, cssVars) =>\n\tnode &&\n\tcssVars &&\n\tObject.keys(cssVars).forEach((prop) => {\n\t\tnode.style.setProperty(prop, cssVars[prop])\n\t})\n\n// 'true'  => true\n// 'false' => false\n// 'null'  => null\n// '42'    => 42\n// '42.5'  => 42.5\n// '08'    => '08'\n// String  => self\nconst deserializeValue = (value) => {\n\tif (!value) {\n\t\treturn value\n\t}\n\n\tif (value === 'true') {\n\t\treturn true\n\t}\n\n\tif (value === 'false') {\n\t\treturn false\n\t}\n\n\tif (value === 'null') {\n\t\treturn null\n\t}\n\n\tif (`${+value}` === value) {\n\t\treturn +value\n\t}\n\n\treturn value\n}\n\nconst getData = (node, key, shouldDeserializeVal = true) =>\n\tnode && shouldDeserializeVal ? deserializeValue(node.dataset[key]) : node.dataset[key]\n\nconst setData = (node, datasetOverrides) => node && datasetOverrides && Object.assign(node.dataset, datasetOverrides)\n\nconst getScreenHeight = (getterOverride?: number) => {\n\treturn getterOverride || document.documentElement.clientHeight || window.innerHeight || 0\n}\n\nconst getDocumentScrollPosition = () => (window ? window.pageYOffset || document.documentElement.scrollTop : 0)\n\nconst fittingTypeToObjectFit = {\n\tfit: 'contain',\n\tfill: 'cover',\n}\n\nexport {\n\tsetAttributes,\n\tsetStyle,\n\tsetCssVars,\n\tgetData,\n\tsetData,\n\tgetScreenHeight,\n\tgetDocumentScrollPosition,\n\tfittingTypeToObjectFit,\n}\n","// @ts-nocheck\n\nimport { fittingTypes, alignTypes, getData } from '@wix/image-kit'\n\nconst getImageComputedProperties = (imageInfo, envConsts, htmlTag) => {\n\tconst { targetWidth, targetHeight, imageData, filters, displayMode = fittingTypes.SCALE_TO_FILL } = imageInfo\n\n\t// todo: CLNT-5323 , wixapp sildergallery proxy is generating image data without uri\n\tif (!targetWidth || !targetHeight || !imageData.uri) {\n\t\treturn { uri: '', css: {} }\n\t}\n\n\tconst {\n\t\twidth,\n\t\theight,\n\t\tcrop,\n\t\tname,\n\t\tfocalPoint,\n\t\tupscaleMethod,\n\t\tquality,\n\t\tdevicePixelRatio = envConsts.devicePixelRatio,\n\t} = imageData\n\tconst imageOptions = {\n\t\tfilters,\n\t\tupscaleMethod,\n\t\t...quality,\n\t}\n\n\tconst pixelAspectRatio = getDevicePixelRatio(devicePixelRatio)\n\n\tconst src = {\n\t\tid: imageData.uri,\n\t\twidth,\n\t\theight,\n\t\t...(crop && { crop }), // eslint-disable-line no-extra-parens\n\t\t...(focalPoint && { focalPoint }), // eslint-disable-line no-extra-parens\n\t\t...(name && { name }), // eslint-disable-line no-extra-parens\n\t}\n\n\tconst target = {\n\t\twidth: targetWidth,\n\t\theight: targetHeight,\n\t\thtmlTag: htmlTag || 'img',\n\t\tpixelAspectRatio,\n\t\talignment: imageInfo.alignType || alignTypes.CENTER,\n\t}\n\n\tconst imageComputedProperties = getData(displayMode, src, target, imageOptions)\n\timageComputedProperties.uri = getMediaUrlByContext(\n\t\timageComputedProperties.uri,\n\t\tenvConsts.staticMediaUrl,\n\t\tenvConsts.mediaRootUrl\n\t)\n\treturn imageComputedProperties\n}\n\nconst getMediaUrlByContext = (imageUri, staticMediaUrl, mediaRootUrl) => {\n\tconst isExternalUrl = /(^https?)|(^data)|(^blob)|(^\\/\\/)/.test(imageUri)\n\tif (isExternalUrl) {\n\t\treturn imageUri\n\t}\n\tlet path = `${staticMediaUrl}/`\n\tif (imageUri) {\n\t\tif (/^micons\\//.test(imageUri)) {\n\t\t\tpath = mediaRootUrl\n\t\t} else if (/[^.]+$/.exec(imageUri)[0] === 'ico') {\n\t\t\t// if the image is an icon then it's taken from a slightly different place\n\t\t\tpath = path.replace('media', 'ficons')\n\t\t}\n\t}\n\treturn path + imageUri\n}\n\nconst getDevicePixelRatio = (devicePixelRatio) => {\n\t// we should be able to force devicePixelRatio from url by using the query param -\n\tconst queryParams = window.location.search.split('&').map((query) => query.split('='))\n\tconst devicePixelRatioQueryParam = queryParams.find((query) => query[0].toLowerCase().includes('devicepixelratio'))\n\tconst devicePixelRatioValueForceFromUrl = devicePixelRatioQueryParam ? Number(devicePixelRatioQueryParam[1]) : null\n\treturn devicePixelRatioValueForceFromUrl || devicePixelRatio || 1\n}\n\nconst getImageSrc = (imageNode, isSvgImage) => imageNode.getAttribute(isSvgImage ? 'xlink:href' : 'src')\n\nfunction getMaskBBox(svgNode) {\n\tif (svgNode) {\n\t\tconst { type } = svgNode.dataset\n\n\t\tif (type && type !== 'ugc') {\n\t\t\tconst dataBBox = svgNode.dataset.bbox\n\n\t\t\tif (!dataBBox) {\n\t\t\t\tconst { x, y, width, height } = svgNode.getBBox()\n\n\t\t\t\treturn `${x} ${y} ${width} ${height}`\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null\n}\n\n// todo: temp experiments for measuring purposes, should be removed after test results\nfunction shouldStopImageLoad(services) {\n\treturn (\n\t\tservices.isExperimentOpen('specs.thunderbolt.tb_stop_client_images') ||\n\t\tservices.isExperimentOpen('specs.thunderbolt.final_force_webp') ||\n\t\tservices.isExperimentOpen('specs.thunderbolt.final_force_no_webp')\n\t)\n}\n\nexport { shouldStopImageLoad, getImageComputedProperties, getImageSrc, getMaskBBox }\n","// @ts-nocheck\n\nexport const initResizeService = () => {\n\tconst resizeService = {\n\t\tobservedElementToRelayoutTarget: new Map(),\n\t\tgetLayoutTargets(elements) {\n\t\t\tconst elementsNeedRelayout = new Set()\n\t\t\telements.forEach((e) => elementsNeedRelayout.add(resizeService.observedElementToRelayoutTarget.get(e)))\n\n\t\t\treturn elementsNeedRelayout\n\t\t},\n\t\tobserve: (element) => {\n\t\t\tresizeService.observedElementToRelayoutTarget.set(element, element)\n\t\t\tresizeObserver.observe(element)\n\t\t},\n\t\tunobserve: (element) => {\n\t\t\tresizeService.observedElementToRelayoutTarget.delete(element)\n\t\t\tresizeObserver.unobserve(element)\n\t\t},\n\t\tobserveChild: (childElement, rootElement) => {\n\t\t\tresizeService.observedElementToRelayoutTarget.set(childElement, rootElement)\n\t\t\tresizeObserver.observe(childElement)\n\t\t},\n\t\tunobserveChild: (childElement) => {\n\t\t\tresizeService.observedElementToRelayoutTarget.delete(childElement)\n\t\t\tresizeObserver.unobserve(childElement)\n\t\t},\n\t}\n\n\tconst resizeObserver = new window.ResizeObserver((entries) => {\n\t\tconst rootElements = resizeService.getLayoutTargets(entries.map((entry) => entry.target))\n\n\t\trootElements.forEach((e) => e.reLayout())\n\t})\n\n\treturn resizeService\n}\n","// @ts-nocheck\n\nconst get = (obj, props, defVal) => {\n\tconst path = Array.isArray(props) ? props : props.split('.')\n\tconst val = path.reduce((subObj, prop) => (subObj && subObj[prop] !== undefined ? subObj[prop] : null), obj)\n\treturn val !== null ? val : defVal\n}\n\nconst pick = (obj, props) => {\n\tconst propsArr = Array.isArray(props) ? props : [props]\n\treturn propsArr.reduce((subObj, prop) => {\n\t\tconst val = get(obj, prop)\n\t\treturn val !== undefined ? Object.assign(subObj, { [prop]: val }) : subObj\n\t}, {})\n}\n\nconst findKey = (obj, predicate) => Object.keys(obj).find((key) => predicate(obj[key], key))\n\n/**\n * Return a unique Array from the input `arr` keeping the last item for each key\n * returned by `predicate(item)`\n *\n * @param {Array} arr\n * @param {function} predicate\n * @returns {Array}\n */\nconst unique = (arr, predicate) => {\n\tconst result = arr.reduce((acc, item) => {\n\t\tacc[predicate(item)] = item\n\t\treturn acc\n\t}, {})\n\n\treturn Object.values(result)\n}\n\nconst cssStringToObject = (styleStr) => {\n\tif (!styleStr || !styleStr.split) {\n\t\treturn {}\n\t}\n\n\treturn styleStr.split(';').reduce(function (ruleMap, ruleString) {\n\t\tconst rulePair = ruleString.split(':')\n\t\tif (rulePair[0] && rulePair[1]) {\n\t\t\truleMap[rulePair[0].trim()] = rulePair[1].trim()\n\t\t}\n\n\t\treturn ruleMap\n\t}, {})\n}\n\n/**\n * @param {Function} callback\n * @returns {Function}\n */\nconst throttleToAnimationFrame = (callback, contextWindow = window) => {\n\tlet throttled = false\n\n\treturn (...args) => {\n\t\tif (!throttled) {\n\t\t\tthrottled = true\n\n\t\t\tcontextWindow.requestAnimationFrame(() => {\n\t\t\t\tthrottled = false\n\t\t\t\tcallback(...args)\n\t\t\t})\n\t\t}\n\t}\n}\n\n/**\n * Join strings to a valid URL.\n *\n * {@see santa-core/santa-core-utils/src/coreUtils/core/urlUtils.js}\n * @param {...string[]} args\n * @return {string}\n */\nfunction joinURL(...args) {\n\tlet url = args[0]\n\n\tfor (let i = 1; i < args.length; ++i) {\n\t\turl = `${url.replace(/\\/$/, '')}/${args[i].replace(/^\\//, '')}`\n\t}\n\n\treturn url\n}\n\nexport { get, pick, findKey, unique, cssStringToObject, throttleToAnimationFrame, joinURL }\n",null,"// @ts-nocheck\n\nimport { setStyle, getScreenHeight, setCssVars } from '../../utils/customElementsCommonUtils'\n\nfunction wixBgMediaWrapper(WixElement, services, contextWindow = window): any {\n\tconst stylesToClear = {\n\t\twidth: undefined,\n\t\theight: undefined,\n\t\tleft: undefined,\n\t\t// top: undefined // TODO: for responsive bg scrub\n\t}\n\tclass WixBgMedia extends WixElement {\n\t\t// eslint-disable-next-line @typescript-eslint/no-useless-constructor\n\t\tconstructor() {\n\t\t\t// eslint-disable-line no-useless-constructor\n\t\t\tsuper()\n\t\t}\n\n\t\treLayout() {\n\t\t\tconst { containerId, pageId, useCssVars, bgEffectName } = this.dataset\n\t\t\tconst container = contextWindow.document.getElementById(`${containerId}`)\n\t\t\tconst page = contextWindow.document.getElementById(`${pageId}`)\n\t\t\tconst measures = {}\n\n\t\t\tservices.mutationService.measure(() => {\n\t\t\t\t// !! note isFixedStyle in edit mode is false although hasParallax is true\n\t\t\t\t// todo: remove window.getComputedStyle and use data-is-full-height (TB backlog)\n\t\t\t\tconst isFixedStyle = contextWindow.getComputedStyle(this).position === 'fixed'\n\t\t\t\tconst screenHeight = getScreenHeight(services.getScreenHeightOverride?.())\n\t\t\t\tconst containerRect = container.getBoundingClientRect()\n\t\t\t\tconst dimensionsByEffect = services.getMediaDimensionsByEffect(\n\t\t\t\t\tbgEffectName,\n\t\t\t\t\tcontainerRect.width,\n\t\t\t\t\tcontainerRect.height,\n\t\t\t\t\tscreenHeight\n\t\t\t\t)\n\t\t\t\tconst { hasParallax } = dimensionsByEffect\n\t\t\t\tconst hasPageTransition = (contextWindow.getComputedStyle(page).transition || '').includes('transform')\n\t\t\t\tconst { width: calculatedWith, height: calculatedHeight } = dimensionsByEffect\n\t\t\t\tconst width = `${calculatedWith}px`\n\t\t\t\tconst height = `${calculatedHeight}px`\n\n\t\t\t\tlet left = `${(containerRect.width - calculatedWith) / 2}px`\n\n\t\t\t\tif (isFixedStyle) {\n\t\t\t\t\tconst pageLeftPosition = contextWindow.document.documentElement.clientLeft\n\t\t\t\t\tleft = hasPageTransition\n\t\t\t\t\t\t? `${container.offsetLeft - pageLeftPosition}px`\n\t\t\t\t\t\t: `${containerRect.left - pageLeftPosition}px`\n\t\t\t\t}\n\n\t\t\t\tconst top = isFixedStyle || hasParallax ? 0 : `${(containerRect.height - calculatedHeight) / 2}px` // will be 0 if no effect\n\n\t\t\t\tconst dimensions = !useCssVars\n\t\t\t\t\t? { width, height, left, top }\n\t\t\t\t\t: {\n\t\t\t\t\t\t\t'--containerW': width,\n\t\t\t\t\t\t\t'--containerH': height,\n\t\t\t\t\t\t\t'--containerL': left,\n\t\t\t\t\t\t\t// '--containerT': top, // TODO: for responsive bg scrub\n\t\t\t\t\t\t\t'--screenH_val': `${screenHeight}`,\n\t\t\t\t\t  }\n\t\t\t\tObject.assign(measures, dimensions)\n\t\t\t})\n\n\t\t\tservices.mutationService.mutate(() => {\n\t\t\t\tif (useCssVars) {\n\t\t\t\t\tsetStyle(this, stylesToClear)\n\t\t\t\t\tsetCssVars(this, measures)\n\t\t\t\t} else {\n\t\t\t\t\tsetStyle(this, measures)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tconnectedCallback() {\n\t\t\tsuper.connectedCallback()\n\n\t\t\tservices.windowResizeService.observe(this)\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tsuper.disconnectedCallback()\n\n\t\t\tservices.windowResizeService.unobserve(this)\n\t\t}\n\n\t\tattributeChangedCallback(name, oldValue) {\n\t\t\tif (oldValue) {\n\t\t\t\tthis.reLayout()\n\t\t\t}\n\t\t}\n\n\t\tstatic get observedAttributes() {\n\t\t\treturn ['data-is-full-height', 'data-container-size']\n\t\t}\n\t}\n\n\treturn WixBgMedia\n}\n\nexport default wixBgMediaWrapper\n","// @ts-nocheck\n\nfunction wixElementWrapper(services, contextWindow = window): any {\n\tclass WixElement extends contextWindow.HTMLElement {\n\t\t// eslint-disable-next-line @typescript-eslint/no-useless-constructor\n\t\tconstructor() {\n\t\t\t// eslint-disable-line no-useless-constructor\n\t\t\tsuper()\n\t\t}\n\n\t\treLayout() {\n\t\t\t// should be implemented inside child element\n\t\t}\n\n\t\tconnectedCallback() {\n\t\t\tthis.observeResize()\n\t\t\tthis.reLayout()\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.unobserveResize()\n\t\t\tthis.unobserveChildren()\n\t\t}\n\n\t\tobserveResize() {\n\t\t\tservices.resizeService.observe(this)\n\t\t}\n\n\t\tunobserveResize() {\n\t\t\tservices.resizeService.unobserve(this)\n\t\t}\n\n\t\t/** 01\n\t\t * Observe DOM mutations to wait for addition of missing children\n\t\t *\n\t\t * @param {HTMLElement} el\n\t\t */\n\t\tobserveChildren(el) {\n\t\t\tif (!this.childListObserver) {\n\t\t\t\tthis.childListObserver = new contextWindow.MutationObserver(() => this.reLayout())\n\t\t\t}\n\n\t\t\tthis.childListObserver.observe(el, { childList: true })\n\t\t}\n\n\t\tobserveChildAttributes(el, attributes = []) {\n\t\t\tif (!this.childrenAttributesObservers) {\n\t\t\t\tthis.childrenAttributesObservers = []\n\t\t\t}\n\t\t\tconst attributesObserver = new contextWindow.MutationObserver(() => this.reLayout())\n\t\t\tattributesObserver.observe(el, { attributeFilter: attributes })\n\t\t\tthis.childrenAttributesObservers.push(attributesObserver)\n\t\t}\n\n\t\tobserveChildResize(child) {\n\t\t\tif (!this.childrenResizeObservers) {\n\t\t\t\tthis.childrenResizeObservers = []\n\t\t\t}\n\t\t\tservices.resizeService.observeChild(child, this)\n\t\t\tthis.childrenResizeObservers.push(child)\n\t\t}\n\n\t\tunobserveChildrenResize() {\n\t\t\tif (this.childrenResizeObservers) {\n\t\t\t\tthis.childrenResizeObservers.forEach((child) => {\n\t\t\t\t\tservices.resizeService.unobserveChild(child)\n\t\t\t\t})\n\t\t\t\tthis.childrenResizeObservers = null\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Remove DOM MutationObserver if one was created\n\t\t */\n\t\tunobserveChildren() {\n\t\t\tif (this.childListObserver) {\n\t\t\t\tthis.childListObserver.disconnect()\n\t\t\t\tthis.childListObserver = null\n\t\t\t}\n\t\t\tif (this.childrenAttributesObservers) {\n\t\t\t\tfor (let observer of this.childrenAttributesObservers) {\n\t\t\t\t\tobserver.disconnect()\n\t\t\t\t\tobserver = null\n\t\t\t\t}\n\t\t\t\tthis.childrenAttributesObservers = null\n\t\t\t}\n\n\t\t\tthis.unobserveChildrenResize()\n\t\t}\n\t}\n\n\treturn WixElement\n}\n\nexport default wixElementWrapper\n","// @ts-nocheck\n\nimport { getImageSrc } from '../../utils/imageUtils'\n\nconst SCROLL_EFFECT_CSS_CLASS = 'scroll-css-var--scrollEffect'\n\n// exclusion of Edge18: https://jira.wixpress.com/browse/BOLT-1828\nconst isEdge18 = (contextWindow) => /Edge\\/18/.test(contextWindow.navigator.userAgent)\n\nconst isIntersectionObserverSupported = (contextWindow) =>\n\tcontextWindow &&\n\t'IntersectionObserver' in contextWindow &&\n\t'IntersectionObserverEntry' in contextWindow &&\n\t'intersectionRatio' in contextWindow.IntersectionObserverEntry.prototype &&\n\t'isIntersecting' in contextWindow.IntersectionObserverEntry.prototype &&\n\t!isEdge18(contextWindow) // due to bug in intersectionObserver Edge18 for strips with parallax|reveal effect, images in fixed position\n\nclass ImageLoader {\n\tconstructor(mutationService, contextWindow = window) {\n\t\tthis.mutationService = mutationService\n\n\t\tif (isIntersectionObserverSupported(contextWindow)) {\n\t\t\tthis.intersectionObserver = new contextWindow.IntersectionObserver(this.getViewPortIntersectionHandler(), {\n\t\t\t\trootMargin: '50% 0px',\n\t\t\t})\n\n\t\t\tthis.scrollEffectsIntersectionObserver = new contextWindow.IntersectionObserver(\n\t\t\t\tthis.getScrollEffectsIntersectionHandler(),\n\t\t\t\t{ rootMargin: '10% 0px' }\n\t\t\t)\n\t\t}\n\t}\n\n\tisImageInViewPort(boundingRect, screenHeight) {\n\t\treturn boundingRect.top + boundingRect.height >= 0 && boundingRect.bottom - boundingRect.height <= screenHeight\n\t}\n\n\tloadImage(wixImageNode, { screenHeight, boundingRect, withScrollEffectVars }) {\n\t\t// TODO: do not check manually is-in-viewport, breaks lazy-load of fixed positioned images\n\t\t// but find solution for hover-box blink\n\t\tif (!this.intersectionObserver || this.isImageInViewPort(boundingRect, screenHeight)) {\n\t\t\tthis.setImageSource(wixImageNode)\n\t\t} else {\n\t\t\tthis.intersectionObserver.unobserve(wixImageNode)\n\t\t\tthis.intersectionObserver.observe(wixImageNode)\n\t\t}\n\n\t\tif (withScrollEffectVars && this.scrollEffectsIntersectionObserver) {\n\t\t\tthis.scrollEffectsIntersectionObserver.unobserve(wixImageNode)\n\t\t\tthis.scrollEffectsIntersectionObserver.observe(wixImageNode)\n\t\t}\n\t}\n\n\tonImageDisconnected(wixImageNode) {\n\t\tif (this.intersectionObserver) {\n\t\t\tthis.intersectionObserver.unobserve(wixImageNode)\n\t\t}\n\n\t\tif (this.scrollEffectsIntersectionObserver) {\n\t\t\tthis.scrollEffectsIntersectionObserver.unobserve(wixImageNode)\n\t\t}\n\t}\n\n\tsetSrcAttribute(imageNode, isSvg, hasSrcset, src) {\n\t\tconst currentSrc = getImageSrc(imageNode, isSvg)\n\t\tif (currentSrc === src) {\n\t\t\treturn\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\timageNode.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', src)\n\t\t} else {\n\t\t\t// Fix Safari +15.4 issue - setting src when loading=\"lazy\" doesn't load the new src\n\t\t\tif (imageNode.hasAttribute('loading')) {\n\t\t\t\timageNode.removeAttribute('loading')\n\t\t\t}\n\n\t\t\tif (hasSrcset) {\n\t\t\t\timageNode.setAttribute('srcset', src)\n\t\t\t}\n\n\t\t\timageNode.setAttribute('fetchpriority', 'high')\n\n\t\t\timageNode.src = src\n\t\t}\n\t}\n\n\tsetSourceSetAttribute(sourceNode, src) {\n\t\tconst currentSrc = sourceNode.srcset\n\t\tif (currentSrc === src) {\n\t\t\treturn\n\t\t}\n\n\t\tsourceNode.srcset = src\n\t}\n\n\tsetImageSource(wixImageNode) {\n\t\tconst isSvg = wixImageNode.dataset.isSvg === 'true'\n\t\tconst imageNode = wixImageNode.querySelector(isSvg ? 'image' : 'img')\n\t\tconst hasSrcset = imageNode.hasAttribute('srcset')\n\t\tconst pictureNode = wixImageNode.querySelector('picture')\n\n\t\tthis.setSrcAttribute(imageNode, isSvg, hasSrcset, wixImageNode.dataset.src)\n\n\t\tif (pictureNode) {\n\t\t\tArray.from(pictureNode.querySelectorAll('source')).forEach((sourceNode) => {\n\t\t\t\tthis.setSourceSetAttribute(sourceNode, sourceNode.dataset.srcset)\n\t\t\t})\n\t\t}\n\t}\n\n\tgetViewPortIntersectionHandler() {\n\t\treturn (entries, observer) => {\n\t\t\tentries\n\t\t\t\t.filter((entry) => entry.isIntersecting)\n\t\t\t\t.forEach((entry) => {\n\t\t\t\t\tconst lazyImage = entry.target\n\t\t\t\t\tthis.setImageSource(lazyImage)\n\t\t\t\t\tobserver.unobserve(lazyImage)\n\t\t\t\t})\n\t\t}\n\t}\n\n\tgetScrollEffectsIntersectionHandler() {\n\t\treturn (entries) =>\n\t\t\tentries.forEach((entry) => {\n\t\t\t\tconst wixImageNode = entry.target\n\t\t\t\tif (entry.isIntersecting) {\n\t\t\t\t\tthis.mutationService.mutate(() => wixImageNode.classList.add(SCROLL_EFFECT_CSS_CLASS))\n\t\t\t\t} else {\n\t\t\t\t\tthis.mutationService.mutate(() => wixImageNode.classList.remove(SCROLL_EFFECT_CSS_CLASS))\n\t\t\t\t}\n\t\t\t})\n\t}\n}\n\nexport default ImageLoader\n","// @ts-nocheck\n\nimport { cssStringToObject } from '../../utils/utils'\nimport { getImageSrc, getMaskBBox } from '../../utils/imageUtils'\nimport {\n\tget,\n\tgetImageComputedProperties,\n\tsetStyle,\n\tgetScreenHeight,\n\tsetAttributes,\n} from '../../utils/customElementsCommonUtils'\n\nconst MOBILE_SAFE_ADDRESSBAR_HEIGHT = 80\n\nfunction getDefaultStyles(style) {\n\tconst { ...styleWithoutDimensions } = style // eslint-disable-line no-unused-vars\n\tconst stylesWithValue = {}\n\tfor (style in styleWithoutDimensions) {\n\t\tif (styleWithoutDimensions[style] !== '') {\n\t\t\tstylesWithValue[style] = styleWithoutDimensions[style]\n\t\t}\n\t}\n\treturn stylesWithValue\n}\n\nfunction getContainerStyle(style, opacity) {\n\tconst styleWithoutDefaults = getDefaultStyles(style)\n\tif (typeof opacity === 'number') {\n\t\tstyleWithoutDefaults.opacity = opacity\n\t}\n\treturn styleWithoutDefaults\n}\n\nfunction getHeightOverride(mediaHeightOverrideType, height) {\n\t// on mobile, document client height vary when scrolling, address bar is collapsing.\n\t// avoiding re-fetching image by returning the same height\n\treturn mediaHeightOverrideType === 'fixed' || mediaHeightOverrideType === 'viewport'\n\t\t? document.documentElement.clientHeight + MOBILE_SAFE_ADDRESSBAR_HEIGHT\n\t\t: height\n}\n\nfunction computeScaleOverrides(imageStyle, targetScale = 1) {\n\treturn targetScale !== 1\n\t\t? {\n\t\t\t\t...imageStyle,\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%',\n\t\t  }\n\t\t: imageStyle\n}\n\n/**\n * specific style overrides\n * @param mediaHeightOverrideType\n * @param imageStyle\n * @param displayMode\n * @param targetScale\n * @returns {*} style object\n */\nfunction computeStyleOverrides(mediaHeightOverrideType, imageStyle, displayMode, targetScale) {\n\t// image scaling override\n\tconst styleWithScale = computeScaleOverrides(imageStyle, targetScale)\n\tif (!mediaHeightOverrideType) {\n\t\treturn styleWithScale\n\t}\n\t// siteBackground on mobile override\n\tconst style = { ...styleWithScale }\n\tif (displayMode === 'fill') {\n\t\tstyle.position = 'absolute'\n\t\tstyle.top = 0\n\t}\n\tif (displayMode === 'fit') {\n\t\tstyle.height = '100%'\n\t}\n\tif (mediaHeightOverrideType === 'fixed') {\n\t\t// eliminates white gap when address bar is collapsing\n\t\tstyle['will-change'] = 'transform'\n\t}\n\t// force image alignment to include top\n\tif (style.objectPosition) {\n\t\tstyle.objectPosition = imageStyle.objectPosition.replace(/(center|bottom)$/, 'top')\n\t}\n\treturn style\n}\n\nfunction measure(\n\tid,\n\tmeasures,\n\tdomNodes,\n\t{ containerElm, isSvgImage, isSvgMask, mediaHeightOverrideType, bgEffectName },\n\tservices\n) {\n\tconst innerImage = domNodes.image\n\tconst wixImage = domNodes[id]\n\tconst screenHeight = getScreenHeight(services.getScreenHeightOverride?.())\n\tconst sourceOfDimensions = containerElm && bgEffectName ? containerElm : wixImage // default to self\n\tconst { width, height } = services.getMediaDimensionsByEffect(\n\t\tbgEffectName,\n\t\tsourceOfDimensions.offsetWidth,\n\t\tsourceOfDimensions.offsetHeight,\n\t\tscreenHeight\n\t)\n\tif (!innerImage) {\n\t\treturn\n\t}\n\n\tconst imgSrc = getImageSrc(innerImage, isSvgImage)\n\n\tmeasures.width = width\n\tmeasures.screenHeight = screenHeight\n\tmeasures.height = getHeightOverride(mediaHeightOverrideType, height)\n\tmeasures.isZoomed = wixImage.getAttribute('data-image-zoomed')\n\tmeasures.isSvgImage = isSvgImage\n\tmeasures.imgSrc = imgSrc\n\tmeasures.renderedStyles = wixImage.getAttribute('data-style')\n\tmeasures.boundingRect = wixImage.getBoundingClientRect()\n\tmeasures.mediaHeightOverrideType = mediaHeightOverrideType\n\n\tif (isSvgMask) {\n\t\tmeasures.bBox = getMaskBBox(domNodes.maskSvg)\n\t}\n}\n\nfunction patch(id, measures, domNodes, imageInfo, services, envConsts, loadImage, bgEffectName) {\n\tif (!Object.keys(measures).length) {\n\t\treturn\n\t}\n\tconst style = cssStringToObject(measures.renderedStyles)\n\tconst { imageData } = imageInfo\n\t// no retina scaling for background scroll effects\n\tif (bgEffectName) {\n\t\timageData.devicePixelRatio = 1\n\t}\n\tconst targetScale = imageInfo.targetScale || 1\n\n\tconst extendedImageInfo = {\n\t\t...imageInfo,\n\t\t...(imageInfo.skipMeasure\n\t\t\t? {}\n\t\t\t: {\n\t\t\t\t\ttargetWidth: (measures.isZoomed ? imageData.width : measures.width) * targetScale,\n\t\t\t\t\ttargetHeight: (measures.isZoomed ? imageData.height : measures.height) * targetScale,\n\t\t\t  }),\n\t\tdisplayMode: imageData.displayMode,\n\t}\n\n\tlet imageComputedProperties\n\tif (measures.isSvgImage) {\n\t\timageComputedProperties = getImageComputedProperties(extendedImageInfo, envConsts, 'svg')\n\t\tsetAttributes(domNodes.svg, measures.isZoomed ? imageComputedProperties.attr.container : {})\n\t} else {\n\t\timageComputedProperties = getImageComputedProperties(extendedImageInfo, envConsts, 'img')\n\t\t// compute style\n\t\tconst computedStyle = get(imageComputedProperties, ['css', 'img']) || {}\n\t\tconst imageStyle = computeStyleOverrides(\n\t\t\tmeasures.mediaHeightOverrideType,\n\t\t\tcomputedStyle,\n\t\t\timageData.displayMode,\n\t\t\ttargetScale\n\t\t)\n\t\tsetStyle(domNodes.image, imageStyle)\n\t}\n\n\tif (measures.bBox && domNodes.maskSvg) {\n\t\tsetAttributes(domNodes.maskSvg, { viewBox: measures.bBox })\n\t}\n\n\tconst containerStyle = getContainerStyle(style, imageData.opacity)\n\tsetStyle(domNodes[id], containerStyle)\n\n\tconst src = get(imageComputedProperties, 'uri') // this was always like this (using _.get) and it looks like videoThumb images for wixapps explodes here since they dont have a uri -> no imageTransformProps\n\n\t// todo:revisit should we calculate(relayout on connect) all images on page load ?\n\tconst imgSrcAttributes = {\n\t\t'data-src': src,\n\t\t// clear initial indication that the image src came from ssr render\n\t\t'data-has-ssr-src': '',\n\t}\n\tsetAttributes(domNodes[id], imgSrcAttributes)\n\n\tif (envConsts.disableImagesLazyLoading) {\n\t\t// set the image src without waiting for viewport intersection\n\t\tsetAttributes(domNodes.image, { src })\n\t}\n\n\tif (loadImage) {\n\t\tservices.imageLoader.loadImage(domNodes[id], {\n\t\t\tscreenHeight: measures.screenHeight,\n\t\t\tboundingRect: measures.boundingRect,\n\t\t})\n\t}\n}\n\nexport default {\n\tmeasure,\n\tpatch,\n}\n","// @ts-nocheck\n\nimport { getDocumentScrollPosition } from '../../utils/domUtils'\nimport { getImageSrc } from '../../utils/imageUtils'\nimport {\n\tgetImageComputedProperties,\n\tsetStyle,\n\tgetScreenHeight,\n\tsetAttributes,\n\tsetCssVars,\n\tget,\n} from '../../utils/customElementsCommonUtils'\n\n// ImageX component uses cssVars for scrollEffect calculation.\n// Values for some of these vars are set here\nconst COMP_HEIGHT_CSS_VAR = '--compH'\nconst COMP_TOP_CSS_VAR = '--top'\nconst SCROLL_CSS_VAR = '--scroll'\n\nfunction getContainerStyle(opacity) {\n\tconst style = {}\n\tif (typeof opacity === 'number') {\n\t\tstyle.opacity = opacity\n\t}\n\treturn style\n}\n\nfunction getScrollEffectCssVars(measures) {\n\treturn {\n\t\t[COMP_HEIGHT_CSS_VAR]: measures.height,\n\t\t[COMP_TOP_CSS_VAR]: Math.ceil(measures.boundingRect.top) + measures.documentScroll,\n\t\t[SCROLL_CSS_VAR]: measures.documentScroll,\n\t}\n}\n\nfunction needScrollEffectCssVars(defaultScrollEffect, sourceSets = []) {\n\tconst hasParallax =\n\t\tdefaultScrollEffect === 'parallax' || sourceSets.some((sourceSet) => sourceSet.scrollEffect === 'parallax')\n\treturn hasParallax\n}\n\nfunction getImageHeight(measures, scrollEffect, parallaxSpeed = 1.5) {\n\tconst heightForScrollEffect = {\n\t\tparallax: measures.height * parallaxSpeed,\n\t\tfixed: measures.screenHeight,\n\t}\n\treturn heightForScrollEffect[scrollEffect] || measures.height\n}\n\nfunction getImageStyle(imageComputedProperties) {\n\tconst imageCss = get(imageComputedProperties, ['css', 'img'])\n\tconst objectFit = imageCss ? imageCss.objectFit : undefined\n\t// do not set height, it would be set by css selector from outside\n\treturn {\n\t\twidth: '100%', // TODO: maybe should not be here, as height, set outside\n\t\tobjectFit,\n\t}\n}\n\nfunction computeSourceSets(measures, imageInfo, envConsts, pictureNode) {\n\tconst { sourceSets } = imageInfo\n\tif (!sourceSets || !sourceSets.length) {\n\t\treturn\n\t}\n\tconst imageInfoClone = JSON.parse(JSON.stringify(imageInfo))\n\tconst { parallaxSpeed } = imageInfoClone\n\tsourceSets.forEach((sourceSet) => {\n\t\tconst sourceNode = pictureNode.querySelector(`source[media='${sourceSet.mediaQuery}']`)\n\t\timageInfoClone.imageData.crop = sourceSet.crop\n\t\timageInfoClone.imageData.displayMode = sourceSet.displayMode\n\t\timageInfoClone.imageData.focalPoint = sourceSet.focalPoint\n\t\timageInfoClone.targetHeight = getImageHeight(measures, sourceSet.scrollEffect, parallaxSpeed)\n\t\tconst imageComputedProperties = getImageComputedProperties(imageInfoClone, envConsts, 'img')\n\t\tsetAttributes(sourceNode, { 'data-srcset': get(imageComputedProperties, 'uri') })\n\t})\n}\n\nfunction measure(id, measures, domNodes) {\n\tconst imageNode = domNodes.image\n\tif (!imageNode) {\n\t\treturn\n\t}\n\n\tconst imgSrc = getImageSrc(imageNode)\n\n\tmeasures.width = domNodes[id].offsetWidth\n\tmeasures.height = domNodes[id].offsetHeight\n\tmeasures.imgSrc = imgSrc\n\tmeasures.screenHeight = getScreenHeight()\n\tmeasures.boundingRect = domNodes[id].getBoundingClientRect()\n\tmeasures.documentScroll = getDocumentScrollPosition()\n}\n\nfunction patch(id, measures, domNodes, imageInfo, services, envConsts, loadImage) {\n\tconst { imageData, parallaxSpeed } = imageInfo\n\n\tconst extendedImageInfo = {\n\t\t...imageInfo,\n\t\ttargetWidth: measures.width,\n\t\ttargetHeight: getImageHeight(measures, imageData.scrollEffect, parallaxSpeed),\n\t\tdisplayMode: imageData.displayMode,\n\t}\n\n\tconst containerStyle = getContainerStyle(imageData.opacity)\n\tsetStyle(domNodes[id], containerStyle)\n\n\tconst imageComputedProperties = getImageComputedProperties(extendedImageInfo, envConsts, 'img')\n\tconst src = get(imageComputedProperties, 'uri')\n\tsetAttributes(domNodes[id], { 'data-src': src })\n\n\tconst needCssVars = needScrollEffectCssVars(imageData.scrollEffect, imageInfo.sourceSets)\n\tif (needCssVars) {\n\t\t// wixui.ImageX implements scroll effects by css variables. provide their values here\n\t\tsetCssVars(domNodes[id], getScrollEffectCssVars(measures))\n\t}\n\n\tconst imageStyle = getImageStyle(imageComputedProperties)\n\tsetStyle(domNodes.image, imageStyle)\n\n\tif (domNodes.picture) {\n\t\tcomputeSourceSets(measures, extendedImageInfo, envConsts, domNodes.picture)\n\t}\n\n\t// clear initial indication that the image src came from first render (e.g. SSR)\n\tsetAttributes(domNodes[id], { 'data-has-ssr-src': '' })\n\n\tif (loadImage) {\n\t\tservices.imageLoader.loadImage(domNodes[id], {\n\t\t\tscreenHeight: measures.screenHeight,\n\t\t\tboundingRect: measures.boundingRect,\n\t\t\twithScrollEffectVars: needCssVars,\n\t\t})\n\t}\n}\n\nexport default {\n\tmeasure,\n\tpatch,\n}\n","// @ts-nocheck\n\nimport ImageLoader from './imageLoader'\nimport { getImageSrc } from '../../utils/imageUtils'\nimport { shouldStopImageLoad } from '../../utils/customElementsCommonUtils'\nimport imageLayout from './imageLayout'\nimport imageLayoutResponsive from './imageLayoutResponsive'\n\nconst TIMEOUT = 250\n\nfunction wixImageWrapper(WixElement, services, environmentConsts, contextWindow = window): any {\n\tif (!services.imageLoader) {\n\t\tservices.imageLoader = new ImageLoader(services.mutationService, contextWindow)\n\t}\n\n\tclass WixImage extends WixElement {\n\t\tconstructor() {\n\t\t\t// eslint-disable-line no-useless-constructor\n\t\t\tsuper()\n\n\t\t\tthis.childListObserver = null\n\t\t\tthis.timeoutId = null\n\t\t}\n\n\t\treLayout() {\n\t\t\t// todo: temp experiment for measuring purposes, should be removed after test results\n\t\t\tif (shouldStopImageLoad(services)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst domNodes = {}\n\t\t\tconst measures = {}\n\n\t\t\tconst imageId = this.getAttribute('id')\n\t\t\tconst imageInfo = JSON.parse(this.dataset.imageInfo)\n\t\t\tconst isSvg = this.dataset.isSvg === 'true'\n\t\t\tconst isSvgMask = this.dataset.isSvgMask === 'true'\n\t\t\tconst isResponsive = this.dataset.isResponsive === 'true'\n\t\t\tconst { bgEffectName } = this.dataset\n\n\t\t\tdomNodes[imageId] = this\n\t\t\tif (imageInfo.containerId) {\n\t\t\t\tdomNodes[imageInfo.containerId] = contextWindow.document.getElementById(`${imageInfo.containerId}`)\n\t\t\t}\n\t\t\tdomNodes.image = this.querySelector(isSvg ? 'image' : 'img')\n\t\t\tdomNodes.svg = isSvg ? this.querySelector('svg') : null\n\t\t\tdomNodes.picture = this.querySelector('picture')\n\t\t\tconst containerElm = imageInfo.containerId && domNodes[imageInfo.containerId]\n\t\t\t// override positioning and scaling of image (SiteBackground mobile override behaviour)\n\t\t\tconst mediaHeightOverrideType = containerElm && containerElm.dataset.mediaHeightOverrideType\n\n\t\t\tif (isSvgMask) {\n\t\t\t\tdomNodes.maskSvg = domNodes.svg && domNodes.svg.querySelector('svg')\n\t\t\t}\n\n\t\t\tif (!domNodes.image) {\n\t\t\t\t// missing children, can't layout, wait for children to be created first\n\t\t\t\t// if isSvg==false || we don't have SVG yet -> use `this`\n\t\t\t\tconst target = isSvg ? domNodes.svg || this : this\n\t\t\t\tthis.observeChildren(target)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// clean up\n\t\t\tthis.unobserveChildren()\n\n\t\t\t// from now on just observe changes to children of top level\n\t\t\tthis.observeChildren(this)\n\n\t\t\t// perform the layout\n\t\t\tconst layout = isResponsive || domNodes.picture ? imageLayoutResponsive : imageLayout // TODO: remove domNodes.picture after wix-ui-santa comes to production 08/03/2020\n\n\t\t\tservices.mutationService.measure(() => {\n\t\t\t\tlayout.measure(\n\t\t\t\t\timageId,\n\t\t\t\t\tmeasures,\n\t\t\t\t\tdomNodes,\n\t\t\t\t\t{\n\t\t\t\t\t\tcontainerElm,\n\t\t\t\t\t\tisSvg,\n\t\t\t\t\t\tisSvgMask,\n\t\t\t\t\t\tmediaHeightOverrideType,\n\t\t\t\t\t\tbgEffectName,\n\t\t\t\t\t},\n\t\t\t\t\tservices\n\t\t\t\t)\n\t\t\t})\n\n\t\t\tconst patchImage = (shouldLoadImage) => {\n\t\t\t\tservices.mutationService.mutate(() => {\n\t\t\t\t\tlayout.patch(\n\t\t\t\t\t\timageId,\n\t\t\t\t\t\tmeasures,\n\t\t\t\t\t\tdomNodes,\n\t\t\t\t\t\timageInfo,\n\t\t\t\t\t\tservices,\n\t\t\t\t\t\tenvironmentConsts,\n\t\t\t\t\t\tshouldLoadImage,\n\t\t\t\t\t\tbgEffectName\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t}\n\t\t\t// if image has no src or current src if from ssr render stage  -\n\t\t\t// load the image immediately, otherwise - debounce the reload\n\t\t\tif (!getImageSrc(domNodes.image, isSvg) || this.dataset.hasSsrSrc) {\n\t\t\t\tpatchImage(true)\n\t\t\t} else {\n\t\t\t\tthis.debounceImageLoad(patchImage)\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Debounce consecutive image loads\n\t\t *\n\t\t * @param patchImage - closure for patching the image\n\t\t */\n\t\tdebounceImageLoad(patchImage) {\n\t\t\tclearTimeout(this.timeoutId)\n\n\t\t\tthis.timeoutId = setTimeout(() => {\n\t\t\t\tpatchImage(true)\n\t\t\t}, TIMEOUT)\n\n\t\t\tpatchImage(false)\n\t\t}\n\n\t\tattributeChangedCallback(name, oldValue) {\n\t\t\tif (oldValue) {\n\t\t\t\tthis.reLayout()\n\t\t\t}\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tsuper.disconnectedCallback()\n\t\t\tservices.imageLoader.onImageDisconnected(this)\n\n\t\t\tthis.unobserveChildren()\n\t\t}\n\n\t\tstatic get observedAttributes() {\n\t\t\treturn ['data-image-info']\n\t\t}\n\t}\n\n\treturn WixImage\n}\n\nexport default wixImageWrapper\n","// @ts-nocheck\n\nimport { throttleToAnimationFrame } from './utils/utils'\nimport wixBgMediaWrapper from './elements/wixBgMedia/wixBgMedia'\nimport wixElementWrapper from './elements/wixElement'\nimport wixImageWrapper from './elements/wixImage/wixImage'\nimport nativeShim from './shims/native-shim'\nimport { initResizeService } from './utils/initResizeService'\n\nfunction init(services, contextWindow = window) {\n\tnativeShim(contextWindow)\n\n\tconst windowResizeService = {\n\t\tregistry: new Set(),\n\t\tobserve(element) {\n\t\t\twindowResizeService.registry.add(element)\n\t\t},\n\t\tunobserve(element) {\n\t\t\twindowResizeService.registry.delete(element)\n\t\t},\n\t}\n\n\tservices.windowResizeService.init(\n\t\tthrottleToAnimationFrame(() => windowResizeService.registry.forEach((element) => element.reLayout())),\n\t\tcontextWindow\n\t)\n\n\tconst resizeService = initResizeService()\n\n\tconst defineCustomElement = (elementName, elementClass) => {\n\t\tif (contextWindow.customElements.get(elementName) === undefined) {\n\t\t\tcontextWindow.customElements.define(elementName, elementClass)\n\t\t}\n\t}\n\n\tconst WixElement = wixElementWrapper({ resizeService }, contextWindow)\n\tcontextWindow.customElementNamespace = { WixElement }\n\n\tdefineCustomElement('wix-element', WixElement)\n\n\tconst defineWixImage = (externalServices, environmentConsts) => {\n\t\tconst WixImage = wixImageWrapper(WixElement, externalServices, environmentConsts, contextWindow)\n\t\tdefineCustomElement('wix-image', WixImage)\n\t}\n\n\tconst defineWixBgMedia = (externalServices) => {\n\t\tconst WixBgMedia = wixBgMediaWrapper(WixElement, { windowResizeService, ...externalServices }, contextWindow)\n\t\tdefineCustomElement('wix-bg-media', WixBgMedia)\n\t}\n\n\treturn {\n\t\tcontextWindow,\n\t\tdefineWixImage,\n\t\tdefineWixBgMedia,\n\t}\n}\n\nexport default {\n\tinit,\n}\n","// @ts-nocheck\n\n/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n\n/* eslint strict:0*/\nexport default function (contextWindow) {\n\tif (\n\t\t// No Reflect, no classes, no need for shim because native custom elements\n\t\t// require ES2015 classes or Reflect.\n\t\tcontextWindow.Reflect === undefined ||\n\t\tcontextWindow.customElements === undefined ||\n\t\t// The webcomponentsjs custom elements polyfill doesn't require\n\t\t// ES2015-compatible construction (`super()` or `Reflect.construct`).\n\t\tcontextWindow.customElements.hasOwnProperty('polyfillWrapFlushCallback')\n\t) {\n\t\treturn\n\t}\n\tconst BuiltInHTMLElement = contextWindow.HTMLElement\n\tcontextWindow.HTMLElement = /** @this {!Object} */ function HTMLElement() {\n\t\treturn contextWindow.Reflect.construct(BuiltInHTMLElement, [], /** @type {!Function} */ this.constructor) // eslint-disable-line no-extra-parens\n\t}\n\tcontextWindow.HTMLElement.prototype = BuiltInHTMLElement.prototype\n\tcontextWindow.HTMLElement.prototype.constructor = contextWindow.HTMLElement\n\tcontextWindow.Object.setPrototypeOf(contextWindow.HTMLElement, BuiltInHTMLElement)\n\tcontextWindow.Object.defineProperty(contextWindow.HTMLElement, 'name', {\n\t\tvalue: BuiltInHTMLElement.name,\n\t})\n}\n","// @ts-nocheck\nimport * as imageKit from '@wix/image-kit'\nimport wixCustomElementsRegistry from './wixCustomElementsRegistry'\n\nexport default {\n\timageClientApi: imageKit,\n\t...wixCustomElementsRegistry,\n}\n","import { alignTypes, fittingTypes, getData } from '@wix/image-kit';\nconst CSS_NUMERIC_VALUES = {\n    columnCount: 1,\n    columns: 1,\n    fontWeight: 1,\n    lineHeight: 1,\n    opacity: 1,\n    zIndex: 1,\n    zoom: 1,\n};\nconst pick = (obj, props) => {\n    const propsArr = Array.isArray(props) ? props : [props];\n    return propsArr.reduce((subObj, prop) => {\n        const val = obj[prop];\n        return val !== undefined ? Object.assign(subObj, { [prop]: val }) : subObj;\n    }, {});\n};\nconst addDefaultUnitIfNeeded = (prop, value) => typeof value === 'number' &&\n    !CSS_NUMERIC_VALUES[prop]\n    ? `${value}px`\n    : value;\nconst setStyle = (node, styleProperties) => node &&\n    styleProperties &&\n    Object.keys(styleProperties).forEach((prop) => {\n        const propValue = styleProperties[prop];\n        if (propValue !== undefined) {\n            node.style[prop] = addDefaultUnitIfNeeded(prop, propValue);\n        }\n        else {\n            node.style.removeProperty(prop);\n        }\n    });\nconst getScreenHeight = (heightOverride) => heightOverride ||\n    document.documentElement.clientHeight ||\n    window.innerHeight ||\n    0;\nconst getImageComputedProperties = (extendedImageInfo, envConsts, htmlTag) => {\n    // todo: CLNT-5323 , wixapp sildergallery proxy is generating image data without uri\n    if (!extendedImageInfo.targetWidth ||\n        !extendedImageInfo.targetHeight ||\n        !extendedImageInfo.imageData.uri) {\n        return { uri: '', css: {}, transformed: false };\n    }\n    const { imageData } = extendedImageInfo;\n    const fittingType = extendedImageInfo.displayMode || fittingTypes.SCALE_TO_FILL;\n    const imageOptions = Object.assign(pick(imageData, 'upscaleMethod'), pick(extendedImageInfo, 'filters'), extendedImageInfo.quality || imageData.quality);\n    const devicePixelRatioFromData = extendedImageInfo.imageData.devicePixelRatio || envConsts.devicePixelRatio;\n    const devicePixelRatio = getDevicePixelRatio(devicePixelRatioFromData);\n    const src = Object.assign(pick(imageData, ['width', 'height', 'crop', 'name', 'focalPoint']), { id: imageData.uri });\n    const target = {\n        width: extendedImageInfo.targetWidth,\n        height: extendedImageInfo.targetHeight,\n        htmlTag: (htmlTag || 'img'),\n        pixelAspectRatio: devicePixelRatio,\n        alignment: extendedImageInfo.alignType || alignTypes.CENTER,\n    };\n    const imageComputedProperties = getData(fittingType, src, target, imageOptions);\n    imageComputedProperties.uri = getMediaUrlByContext(imageComputedProperties.uri, envConsts.staticMediaUrl, envConsts.mediaRootUrl);\n    return imageComputedProperties;\n};\nconst getMediaUrlByContext = (imageUri, staticMediaUrl, mediaRootUrl) => {\n    var _a;\n    const isExternalUrl = /(^https?)|(^data)|(^blob)|(^\\/\\/)/.test(imageUri);\n    if (isExternalUrl) {\n        return imageUri;\n    }\n    let path = `${staticMediaUrl}/`;\n    if (imageUri) {\n        if (/^micons\\//.test(imageUri)) {\n            path = mediaRootUrl;\n        }\n        else if (((_a = /[^.]+$/.exec(imageUri)) === null || _a === void 0 ? void 0 : _a[0]) === 'ico') {\n            // if the image is an icon then it's taken from a slightly different place\n            path = path.replace('media', 'ficons');\n        }\n    }\n    return path + imageUri;\n};\nconst getDevicePixelRatio = (devicePixelRatio) => {\n    // we should be able to force devicePixelRatio from url by using the query param -\n    const queryParams = window.location.search\n        .split('&')\n        .map((query) => query.split('='));\n    const devicePixelRatioQueryParam = queryParams.find((query) => query[0].toLowerCase().includes('devicepixelratio'));\n    const devicePixelRatioValueForceFromUrl = devicePixelRatioQueryParam\n        ? Number(devicePixelRatioQueryParam[1])\n        : null;\n    return devicePixelRatioValueForceFromUrl || devicePixelRatio || 1;\n};\nconst getImageSrc = (imageNode) => imageNode.getAttribute('src');\nexport { getScreenHeight, setStyle, getImageComputedProperties, getImageSrc };\n//# sourceMappingURL=utils.js.map","import { getImageSrc } from './utils';\n// const SCROLL_EFFECT_CSS_CLASS = 'scroll-css-var--scrollEffect';\n// exclusion of Edge18: https://jira.wixpress.com/browse/BOLT-1828\nconst isEdge18 = () => /Edge\\/18/.test(window.navigator.userAgent);\nconst isIntersectionObserverSupported = () => window &&\n    'IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype &&\n    'isIntersecting' in window.IntersectionObserverEntry.prototype &&\n    !isEdge18(); // due to bug in intersectionObserver Edge18 for strips with parallax|reveal effect, images in fixed position\nclass ImageLoader {\n    constructor(mutationService) {\n        this.mutationService = mutationService;\n        if (isIntersectionObserverSupported()) {\n            this.intersectionObserver = new IntersectionObserver(this.getViewPortIntersectionHandler(), { rootMargin: '50% 0px' });\n            // this.scrollEffectsIntersectionObserver = new IntersectionObserver(\n            //   this.getScrollEffectsIntersectionHandler(),\n            //   { rootMargin: '10% 0px' },\n            // );\n        }\n    }\n    isImageInViewPort(boundingRect, screenHeight) {\n        return (boundingRect.top + boundingRect.height >= 0 &&\n            boundingRect.bottom - boundingRect.height <= screenHeight);\n    }\n    loadImage(wixImageNode, { \n    // withScrollEffectVars,\n    screenHeight, boundingRect, }) {\n        // TODO: do not check manually is-in-viewport, breaks lazy-load of fixed positioned images\n        // but find solution for hover-box blink\n        if (!this.intersectionObserver ||\n            this.isImageInViewPort(boundingRect, screenHeight)) {\n            this.setImageSource(wixImageNode);\n        }\n        else {\n            this.intersectionObserver.unobserve(wixImageNode);\n            this.intersectionObserver.observe(wixImageNode);\n        }\n        // if (withScrollEffectVars && this.scrollEffectsIntersectionObserver) {\n        //   this.scrollEffectsIntersectionObserver.unobserve(wixImageNode);\n        //   this.scrollEffectsIntersectionObserver.observe(wixImageNode);\n        // }\n    }\n    onImageDisconnected(wixImageNode) {\n        if (this.intersectionObserver) {\n            this.intersectionObserver.unobserve(wixImageNode);\n        }\n        // if (this.scrollEffectsIntersectionObserver) {\n        //   this.scrollEffectsIntersectionObserver.unobserve(wixImageNode);\n        // }\n    }\n    setSrcAttribute(imageNode, src) {\n        const currentSrc = getImageSrc(imageNode);\n        if (currentSrc === src) {\n            return;\n        }\n        // We always want to fetch images within viewport with high priority\n        imageNode.setAttribute('fetchpriority', 'high');\n        imageNode.src = src;\n        if (imageNode.hasAttribute('srcset')) {\n            imageNode.srcset = src;\n        }\n    }\n    // setSourceSetAttribute(sourceNode: HTMLSourceElement, src: string) {\n    //   const currentSrc = sourceNode.srcset;\n    //\n    //   if (currentSrc === src) {\n    //     return;\n    //   }\n    //\n    //   sourceNode.srcset = src;\n    // }\n    setImageSource(wixImageNode) {\n        const imageNode = wixImageNode.querySelector('img');\n        // const pictureNode = wixImageNode.querySelector('picture');\n        this.setSrcAttribute(imageNode, wixImageNode.dataset.src);\n        // if (pictureNode) {\n        //   Array.from(pictureNode.querySelectorAll('source')).forEach(\n        //     (sourceNode: HTMLSourceElement) => {\n        //       this.setSourceSetAttribute(sourceNode, sourceNode.dataset.srcset!);\n        //     },\n        //   );\n        // }\n    }\n    getViewPortIntersectionHandler() {\n        return (entries, observer) => {\n            entries\n                .filter((entry) => entry.isIntersecting)\n                .forEach((entry) => {\n                const lazyImage = entry.target;\n                this.setImageSource(lazyImage);\n                observer.unobserve(lazyImage);\n            });\n        };\n    }\n}\nexport default ImageLoader;\n//# sourceMappingURL=ImageLoader.js.map","import { getScreenHeight, setStyle, getImageComputedProperties, getImageSrc, } from './utils';\nconst MOBILE_SAFE_ADDRESSBAR_HEIGHT = 80;\nfunction getHeightOverride(height, mediaHeightOverrideType) {\n    // on mobile, documentElement.clientHeight changes when scrolling, because of address bar collapsing.\n    // avoiding re-fetching image by returning the same height\n    return mediaHeightOverrideType === 'fixed' ||\n        mediaHeightOverrideType === 'viewport'\n        ? document.documentElement.clientHeight + MOBILE_SAFE_ADDRESSBAR_HEIGHT\n        : height;\n}\nfunction computeScaleOverrides(imageStyle, targetScale = 1) {\n    return targetScale !== 1\n        ? Object.assign(Object.assign({}, imageStyle), { width: '100%', height: '100%' }) : imageStyle;\n}\n/**\n * compute specific overrides\n */\nfunction computeStyleOverrides(mediaHeightOverrideType, imageStyle, displayMode, targetScale) {\n    // image scaling override\n    const styleWithScale = computeScaleOverrides(imageStyle, targetScale);\n    if (!mediaHeightOverrideType) {\n        return styleWithScale;\n    }\n    // siteBackground on mobile\n    const style = Object.assign({}, styleWithScale);\n    if (displayMode === 'fill') {\n        style.position = 'absolute';\n        style.top = '0';\n    }\n    else if (displayMode === 'fit') {\n        style.height = '100%';\n    }\n    if (mediaHeightOverrideType === 'fixed') {\n        // eliminates white gap when address bar is collapsing\n        style['will-change'] = 'transform';\n    }\n    // force image alignment to include top\n    if (style.objectPosition) {\n        style.objectPosition = imageStyle.objectPosition.replace(/(center|bottom)$/, 'top');\n    }\n    return style;\n}\nfunction measure(id, measures, domNodes, { containerElm, bgEffectName = 'none', }, services) {\n    var _a, _b;\n    const innerImage = domNodes.image;\n    const wixImage = domNodes[id];\n    const screenHeight = getScreenHeight((_a = services.getScreenHeightOverride) === null || _a === void 0 ? void 0 : _a.call(services));\n    // override positioning and scaling of image (SiteBackground mobile override behaviour)\n    const mediaHeightOverrideType = containerElm === null || containerElm === void 0 ? void 0 : containerElm.dataset.mediaHeightOverrideType;\n    const sourceOfDimensions = (containerElm && bgEffectName && bgEffectName !== 'none'\n        ? containerElm\n        : wixImage); // default to self\n    const { width, height } = ((_b = services.getMediaDimensionsByEffect) === null || _b === void 0 ? void 0 : _b.call(services, bgEffectName, sourceOfDimensions.offsetWidth, sourceOfDimensions.offsetHeight, screenHeight)) || {\n        width: wixImage.offsetWidth,\n        height: wixImage.offsetHeight,\n    };\n    if (!innerImage) {\n        return;\n    }\n    const imgSrc = getImageSrc(innerImage);\n    measures.width = width;\n    measures.height = getHeightOverride(height, mediaHeightOverrideType);\n    measures.screenHeight = screenHeight;\n    measures.imgSrc = imgSrc;\n    measures.boundingRect = wixImage.getBoundingClientRect();\n    measures.mediaHeightOverrideType = mediaHeightOverrideType;\n}\nfunction patch(id, measures, domNodes, imageInfo, services, envConsts, loadImage, bgEffectName) {\n    var _a, _b, _c;\n    if (!Object.keys(measures).length) {\n        return;\n    }\n    const { imageData } = imageInfo;\n    const wixImageNode = domNodes[id];\n    const image = domNodes.image;\n    // no retina scaling for background scroll effects\n    if (bgEffectName) {\n        imageData.devicePixelRatio = 1;\n    }\n    const targetScale = imageInfo.targetScale || 1;\n    const extendedImageInfo = Object.assign(Object.assign(Object.assign({}, imageInfo), (!imageInfo.skipMeasure && {\n        targetWidth: (measures.width || 0) * targetScale,\n        targetHeight: (measures.height || 0) * targetScale,\n    })), { displayMode: imageData.displayMode });\n    const imageComputedProperties = getImageComputedProperties(extendedImageInfo, envConsts, 'img');\n    const computedStyle = ((_a = imageComputedProperties === null || imageComputedProperties === void 0 ? void 0 : imageComputedProperties.css) === null || _a === void 0 ? void 0 : _a.img) || {};\n    const imageStyle = computeStyleOverrides(measures.mediaHeightOverrideType, computedStyle, imageData.displayMode, targetScale);\n    setStyle(image, imageStyle);\n    const src = (imageComputedProperties === null || imageComputedProperties === void 0 ? void 0 : imageComputedProperties.uri) || '';\n    wixImageNode.setAttribute('data-src', src);\n    // clear initial indication that the image src came from ssr render\n    wixImageNode.setAttribute('data-has-ssr-src', '');\n    if (!((_b = services.isExperimentOpen) === null || _b === void 0 ? void 0 : _b.call(services, 'specs.thunderbolt.wowImageRelayout')) &&\n        envConsts.disableImagesLazyLoading) {\n        // set the image src without waiting for viewport intersection\n        image.setAttribute('src', src);\n    }\n    if (imageInfo.isLQIP &&\n        imageInfo.lqipTransition &&\n        !('transitioned' in wixImageNode.dataset)) {\n        wixImageNode.dataset.transitioned = '';\n        if (image.complete) {\n            image.onload = function () {\n                image.dataset.loadDone = '';\n            };\n        }\n        else {\n            image.onload = function () {\n                if (image.complete) {\n                    image.dataset.loadDone = '';\n                }\n                else {\n                    image.onload = function () {\n                        image.dataset.loadDone = '';\n                    };\n                }\n            };\n        }\n    }\n    if (loadImage) {\n        if ((_c = services.isExperimentOpen) === null || _c === void 0 ? void 0 : _c.call(services, 'specs.thunderbolt.wowImageRelayout')) {\n            image.setAttribute('src', src);\n        }\n        else {\n            services.imageLoader.loadImage(wixImageNode, {\n                screenHeight: measures.screenHeight,\n                boundingRect: measures.boundingRect,\n            });\n        }\n    }\n}\nexport default {\n    measure,\n    patch,\n};\n//# sourceMappingURL=imageLayout.js.map","// @ts-nocheck\nimport { getImageSrc } from './utils';\nimport ImageLoader from './ImageLoader';\nimport imageLayout from './imageLayout';\nconst TIMEOUT = 250;\nfunction wowImageFactory(services, environmentConsts, contextWindow) {\n    var _a;\n    const relayoutOnIntersect = (_a = services.isExperimentOpen) === null || _a === void 0 ? void 0 : _a.call(services, 'specs.thunderbolt.wowImageRelayout');\n    // remove imageLoader on experiment merge\n    if (!services.imageLoader && !relayoutOnIntersect) {\n        services.imageLoader = new ImageLoader(services.mutationService);\n    }\n    return class WowImage extends contextWindow.HTMLElement {\n        constructor() {\n            // eslint-disable-line no-useless-constructor\n            super();\n            this.childListObserver = null;\n            this.timeoutId = null;\n        }\n        attributeChangedCallback(_, oldValue) {\n            if (oldValue) {\n                this.reLayout();\n            }\n        }\n        connectedCallback() {\n            if (relayoutOnIntersect) {\n                if (environmentConsts.disableImagesLazyLoading) {\n                    this.reLayout();\n                }\n                else {\n                    this.observeIntersect();\n                }\n            }\n            else {\n                // remove reLayout and observeResize calls on experiment merge\n                this.observeResize();\n                this.reLayout();\n            }\n        }\n        disconnectedCallback() {\n            this.unobserveResize();\n            this.unobserveIntersect();\n            services.imageLoader.onImageDisconnected(this);\n            this.unobserveChildren();\n        }\n        static get observedAttributes() {\n            return ['data-image-info'];\n        }\n        reLayout() {\n            const domNodes = {};\n            const measures = {};\n            const imageId = this.getAttribute('id');\n            const imageInfo = JSON.parse(this.dataset.imageInfo || '');\n            // const isResponsive = this.dataset.isResponsive === 'true';\n            const { bgEffectName } = this.dataset;\n            domNodes[imageId] = this;\n            if (imageInfo.containerId) {\n                domNodes[imageInfo.containerId] = contextWindow.document.getElementById(`${imageInfo.containerId}`);\n            }\n            domNodes.image = this.querySelector('img');\n            // domNodes.picture = this.querySelector('picture');\n            const containerElm = imageInfo.containerId\n                ? domNodes[imageInfo.containerId]\n                : undefined;\n            if (!domNodes.image) {\n                // missing children, can't layout, wait for children to be created first\n                const target = this;\n                this.observeChildren(target);\n                return;\n            }\n            // clean up\n            this.unobserveChildren();\n            // from now on just observe changes to children of top level\n            this.observeChildren(this);\n            services.mutationService.measure(() => {\n                // if (isResponsive) {\n                //   imageLayoutResponsive.measure(\n                //     imageId,\n                //     measures as WixImageXMeasures,\n                //     domNodes,\n                //     services,\n                //   );\n                // } else {\n                imageLayout.measure(imageId, measures, domNodes, {\n                    containerElm,\n                    bgEffectName,\n                }, services);\n            });\n            const patchImage = (shouldLoadImage) => {\n                services.mutationService.mutate(() => {\n                    // if (isResponsive) {\n                    //   imageLayoutResponsive.patch(\n                    //     imageId,\n                    //     measures as WixImageXMeasures,\n                    //     domNodes,\n                    //     imageInfo,\n                    //     services,\n                    //     environmentConsts,\n                    //     shouldLoadImage,\n                    //   );\n                    // } else {\n                    imageLayout.patch(imageId, measures, domNodes, imageInfo, services, environmentConsts, shouldLoadImage, bgEffectName);\n                });\n            };\n            //\n            if (relayoutOnIntersect) {\n                this.unobserveResize();\n                this.observeResize();\n            }\n            // if image has no src or current src if from ssr render stage  -\n            // load the image immediately, otherwise - debounce the reload\n            if (!getImageSrc(domNodes.image) ||\n                this.dataset.hasSsrSrc) {\n                patchImage(true);\n            }\n            else {\n                this.debounceImageLoad(patchImage);\n            }\n        }\n        /**\n         * Debounce consecutive image loads\n         *\n         * @param {function} patchImage closure for patching the image\n         */\n        debounceImageLoad(patchImage) {\n            clearTimeout(this.timeoutId);\n            this.timeoutId = contextWindow.setTimeout(() => {\n                patchImage(true);\n            }, TIMEOUT);\n            patchImage(false);\n        }\n        observeResize() {\n            var _a;\n            (_a = services.resizeService) === null || _a === void 0 ? void 0 : _a.observe(this);\n        }\n        unobserveResize() {\n            var _a;\n            (_a = services.resizeService) === null || _a === void 0 ? void 0 : _a.unobserve(this);\n        }\n        observeIntersect() {\n            var _a;\n            (_a = services.intersectService) === null || _a === void 0 ? void 0 : _a.observe(this);\n        }\n        unobserveIntersect() {\n            var _a;\n            (_a = services.intersectService) === null || _a === void 0 ? void 0 : _a.unobserve(this);\n        }\n        /**\n         * Observe DOM mutations to wait for addition of missing children\n         *\n         * @param {HTMLElement} parent\n         */\n        observeChildren(parent) {\n            if (!this.childListObserver) {\n                this.childListObserver = new contextWindow.MutationObserver(() => {\n                    this.reLayout();\n                });\n            }\n            this.childListObserver.observe(parent, { childList: true });\n        }\n        /**\n         * Remove DOM MutationObserver if one was created\n         */\n        unobserveChildren() {\n            if (this.childListObserver) {\n                this.childListObserver.disconnect();\n                this.childListObserver = null;\n            }\n        }\n    };\n}\nexport default wowImageFactory;\n//# sourceMappingURL=WowImage.js.map","import fastdom from 'fastdom';\nimport init from './custom-element/registry';\nconst getDevicePixelRatio = () => {\n    const isMSMobileDevice = /iemobile/i.test(navigator.userAgent);\n    if (isMSMobileDevice) {\n        return Math.round(window.screen.availWidth /\n            (window.screen.width || window.document.documentElement.clientWidth));\n    }\n    return window.devicePixelRatio;\n};\nconst STATIC_MEDIA_URL = 'https://static.wixstatic.com/media';\nconst MEDIA_ROOT_URL = 'https://static.wixstatic.com';\nfunction initCustomElement(services = {}, contextWindow = null, envConsts = {}) {\n    var _a;\n    if (typeof window === 'undefined') {\n        return;\n    }\n    const env = Object.assign({ staticMediaUrl: STATIC_MEDIA_URL, mediaRootUrl: MEDIA_ROOT_URL, experiments: {}, devicePixelRatio: getDevicePixelRatio() }, envConsts);\n    const relayoutOnIntersect = (_a = services.isExperimentOpen) === null || _a === void 0 ? void 0 : _a.call(services, 'specs.thunderbolt.wowImageRelayout');\n    const define = init(contextWindow, !!relayoutOnIntersect);\n    if (define) {\n        define(Object.assign({ mutationService: fastdom }, services), env);\n    }\n}\nexport { initCustomElement };\n//# sourceMappingURL=customElementInit.js.map","// @ts-nocheck\nimport wowImageFactory from './WowImage';\nexport default function init(contextWindow, relayoutOnIntersect) {\n    const elementName = 'wow-image';\n    contextWindow = contextWindow || window;\n    if (contextWindow.customElements.get(elementName) === undefined) {\n        let resizeObserver;\n        if (contextWindow.ResizeObserver) {\n            resizeObserver = new contextWindow.ResizeObserver((entries) => entries.map((entry) => entry.target.reLayout()));\n        }\n        let intersectionObserver;\n        if (relayoutOnIntersect && contextWindow.IntersectionObserver) {\n            intersectionObserver = new IntersectionObserver((entries, observer) => entries.map((entry) => {\n                const wowImage = entry.target;\n                if (entry.isIntersecting) {\n                    wowImage.reLayout();\n                    wowImage.unobserveIntersect();\n                }\n                return entry;\n            }), { rootMargin: '50% 0px' });\n        }\n        return function (services, env) {\n            const WowImage = wowImageFactory(Object.assign({ resizeService: resizeObserver, intersectionService: intersectionObserver }, services), env, contextWindow);\n            contextWindow.customElements.define(elementName, WowImage);\n        };\n    }\n    return;\n}\n//# sourceMappingURL=registry.js.map","import fastdom from 'fastdom'\nimport { ViewerModel } from '@wix/thunderbolt-symbols'\nimport { mediaResizeMap } from '@wix/animations-kit'\nimport wixCustomElementsRegistry from '@wix/custom-elements'\nimport { initCustomElement as initWowImageCustomElement } from '@wix/image'\n\ntype CustomElementsMediaData = Pick<ViewerModel, 'experiments' | 'media' | 'requestUrl'>\ntype MediaServicesOverride = {\n\tgetScreenHeightOverride: () => number\n}\ntype EnvironmentOverrides = {\n\tdisableImagesLazyLoading: boolean\n}\n\nconst getSiteService = () => ({\n\tgetSiteScale: () => {\n\t\t// We can replace later with better logic\n\t\tconst siteRootElement = document.querySelector<HTMLDivElement>('#site-root')\n\t\tif (siteRootElement) {\n\t\t\treturn siteRootElement.getBoundingClientRect().width / siteRootElement.offsetWidth\n\t\t}\n\t\treturn 1\n\t},\n})\n\nconst initWixCustomElementsRegistry = () => {\n\tconst resizeService = {\n\t\tinit: (callback: any) => new ResizeObserver(callback),\n\t}\n\n\tconst windowResizeService = {\n\t\tinit: (callback: any) => window.addEventListener('resize', callback),\n\t}\n\n\tconst siteService = getSiteService()\n\n\treturn wixCustomElementsRegistry.init({ resizeService, windowResizeService, siteService })\n}\n\nconst getMediaDimensionsByEffect = (bgEffectName: string, width: number, height: number, screenHeight: number) => {\n\tconst { getMediaDimensions, ...rest } = mediaResizeMap[bgEffectName as keyof typeof mediaResizeMap] || {}\n\treturn getMediaDimensions\n\t\t? { ...getMediaDimensions(width, height, screenHeight), ...rest }\n\t\t: { width, height, ...rest }\n}\n\nconst buildCustomElementsMediaParams = (\n\tpartialViewerModel: CustomElementsMediaData,\n\twixCustomElements?: any,\n\tmediaOverrideParam?: MediaServicesOverride,\n\tenvironmentOverrides?: EnvironmentOverrides\n) => {\n\tconst getDevicePixelRatio = () => {\n\t\tconst isMSMobileDevice = /iemobile/i.test(navigator.userAgent)\n\t\tif (isMSMobileDevice) {\n\t\t\treturn Math.round(\n\t\t\t\twindow.screen.availWidth / (window.screen.width || window.document.documentElement.clientWidth)\n\t\t\t)\n\t\t}\n\t\treturn window.devicePixelRatio\n\t}\n\n\tconst isExperimentOpen = (experiment: string) => Boolean(partialViewerModel.experiments[experiment])\n\n\tconst environmentConsts = {\n\t\tstaticMediaUrl: partialViewerModel.media.staticMediaUrl,\n\t\tmediaRootUrl: partialViewerModel.media.mediaRootUrl,\n\t\texperiments: {},\n\t\tisViewerMode: true,\n\t\tdevicePixelRatio: getDevicePixelRatio(),\n\t\t...environmentOverrides,\n\t}\n\n\tconst services = {\n\t\tmutationService: fastdom,\n\t\tisExperimentOpen,\n\t\tsiteService: getSiteService(),\n\t}\n\tconst mediaServices = { getMediaDimensionsByEffect, ...services, ...mediaOverrideParam }\n\n\treturn {\n\t\t...partialViewerModel,\n\t\twixCustomElements: wixCustomElements || initWixCustomElementsRegistry(),\n\t\tservices,\n\t\tenvironmentConsts,\n\t\tmediaServices,\n\t}\n}\n\nexport const initCustomElements = (\n\tpartialViewerModelParam: CustomElementsMediaData,\n\twixCustomElementsParam?: any,\n\tmediaOverrideParam?: MediaServicesOverride,\n\tenvironmentOverrides?: EnvironmentOverrides\n) => {\n\tconst { environmentConsts, wixCustomElements, media, requestUrl, mediaServices } = buildCustomElementsMediaParams(\n\t\tpartialViewerModelParam,\n\t\twixCustomElementsParam,\n\t\tmediaOverrideParam,\n\t\tenvironmentOverrides\n\t)\n\tconst contextWindow = wixCustomElements?.contextWindow || window\n\tcontextWindow.wixCustomElements = wixCustomElements\n\tObject.assign(contextWindow.customElementNamespace, {\n\t\tmediaServices,\n\t\tenvironmentConsts,\n\t\trequestUrl,\n\t\tstaticVideoUrl: media.staticVideoUrl,\n\t})\n\n\tinitWowImageCustomElement({ ...mediaServices }, wixCustomElements.contextWindow, environmentConsts)\n\n\twixCustomElements.defineWixImage(mediaServices, environmentConsts)\n\twixCustomElements.defineWixBgMedia(mediaServices)\n\twindow.__imageClientApi__ = wixCustomElementsRegistry.imageClientApi\n}\n","import { initCustomElements } from '@wix/thunderbolt-custom-elements'\n\nconst { experiments, media, requestUrl } = window.viewerModel\ninitCustomElements({ experiments, media, requestUrl })\n"],"names":["CSS_NUMERIC_VALUES","columnCount","columns","fontWeight","lineHeight","opacity","zIndex","zoom","setAttributes","node","attributes","Object","keys","forEach","attr","setAttribute","setStyle","styleProperties","prop","propValue","undefined","style","value","addDefaultUnitIfNeeded","removeProperty","setCssVars","cssVars","setProperty","getData","key","shouldDeserializeVal","dataset","setData","datasetOverrides","assign","getScreenHeight","getterOverride","document","documentElement","clientHeight","window","innerHeight","getDocumentScrollPosition","pageYOffset","scrollTop","fittingTypeToObjectFit","fit","fill","getImageComputedProperties","imageInfo","envConsts","htmlTag","targetWidth","targetHeight","imageData","filters","displayMode","fittingTypes","uri","css","width","height","crop","name","focalPoint","upscaleMethod","quality","devicePixelRatio","imageOptions","pixelAspectRatio","getDevicePixelRatio","src","id","target","alignment","alignType","alignTypes","imageComputedProperties","getMediaUrlByContext","staticMediaUrl","mediaRootUrl","imageUri","test","path","exec","replace","devicePixelRatioQueryParam","location","search","split","map","query","find","toLowerCase","includes","Number","getImageSrc","imageNode","isSvgImage","getAttribute","getMaskBBox","svgNode","type","bbox","x","y","getBBox","shouldStopImageLoad","services","isExperimentOpen","initResizeService","resizeService","observedElementToRelayoutTarget","Map","getLayoutTargets","elements","elementsNeedRelayout","Set","e","add","get","observe","element","set","resizeObserver","unobserve","delete","observeChild","childElement","rootElement","unobserveChild","ResizeObserver","entries","entry","reLayout","obj","props","defVal","val","Array","isArray","reduce","subObj","findKey","predicate","unique","arr","result","acc","item","values","cssStringToObject","styleStr","ruleMap","ruleString","rulePair","trim","throttleToAnimationFrame","callback","contextWindow","throttled","args","requestAnimationFrame","joinURL","url","i","length","deg2rad","angleInDeg","Math","PI","getMediaDimensions","getFullHeightMedia","screenHeight","max","BackgroundParallax","hasParallax","BackgroundParallaxZoom","BackgroundReveal","BgCloseUp","BgExpand","BgFabeBack","BgFadeIn","BgFadeOut","BgFake3D","BgPanLeft","BgPanRight","BgParallax","BgPullBack","BgReveal","BgRotate","angleInRad","radius","hypot","travelAngle","acos","boundingWidth","abs","cos","sin","boundingHeight","ceil","getMaxRotateBounds","BgShrink","BgSkew","tan","getMaxSkewYBounds","BgUnwind","BgZoomIn","BgZoomOut","WixElement","stylesToClear","left","constructor","super","containerId","pageId","useCssVars","bgEffectName","this","container","getElementById","page","measures","mutationService","measure","isFixedStyle","getComputedStyle","position","getScreenHeightOverride","containerRect","getBoundingClientRect","dimensionsByEffect","getMediaDimensionsByEffect","hasPageTransition","transition","calculatedWith","calculatedHeight","pageLeftPosition","clientLeft","offsetLeft","top","dimensions","mutate","connectedCallback","windowResizeService","disconnectedCallback","attributeChangedCallback","oldValue","observedAttributes","HTMLElement","observeResize","unobserveResize","unobserveChildren","observeChildren","el","childListObserver","MutationObserver","childList","observeChildAttributes","childrenAttributesObservers","attributesObserver","attributeFilter","push","observeChildResize","child","childrenResizeObservers","unobserveChildrenResize","disconnect","observer","SCROLL_EFFECT_CSS_CLASS","IntersectionObserverEntry","prototype","navigator","userAgent","isEdge18","isIntersectionObserverSupported","intersectionObserver","IntersectionObserver","getViewPortIntersectionHandler","rootMargin","scrollEffectsIntersectionObserver","getScrollEffectsIntersectionHandler","isImageInViewPort","boundingRect","bottom","loadImage","wixImageNode","withScrollEffectVars","setImageSource","onImageDisconnected","setSrcAttribute","isSvg","hasSrcset","setAttributeNS","hasAttribute","removeAttribute","setSourceSetAttribute","sourceNode","srcset","querySelector","pictureNode","from","querySelectorAll","filter","isIntersecting","lazyImage","classList","remove","getContainerStyle","styleWithoutDefaults","styleWithoutDimensions","stylesWithValue","getDefaultStyles","computeStyleOverrides","mediaHeightOverrideType","imageStyle","targetScale","styleWithScale","computeScaleOverrides","objectPosition","domNodes","containerElm","isSvgMask","innerImage","image","wixImage","sourceOfDimensions","offsetWidth","offsetHeight","imgSrc","getHeightOverride","isZoomed","renderedStyles","bBox","maskSvg","patch","extendedImageInfo","skipMeasure","svg","computedStyle","viewBox","containerStyle","imgSrcAttributes","disableImagesLazyLoading","imageLoader","getImageHeight","scrollEffect","parallaxSpeed","parallax","fixed","documentScroll","needCssVars","defaultScrollEffect","sourceSets","some","sourceSet","needScrollEffectCssVars","getScrollEffectCssVars","imageCss","objectFit","getImageStyle","picture","imageInfoClone","JSON","parse","stringify","mediaQuery","computeSourceSets","environmentConsts","timeoutId","imageId","isResponsive","layout","imageLayoutResponsive","imageLayout","patchImage","shouldLoadImage","hasSsrSrc","debounceImageLoad","clearTimeout","setTimeout","init","Reflect","customElements","hasOwnProperty","BuiltInHTMLElement","construct","setPrototypeOf","defineProperty","registry","defineCustomElement","elementName","elementClass","define","wixElement","customElementNamespace","defineWixImage","externalServices","WixImage","defineWixBgMedia","WixBgMedia","wixBgMedia","imageClientApi","wixCustomElementsRegistry","pick","_a","_b","call","_c","transformed","fittingType","devicePixelRatioFromData","img","isLQIP","lqipTransition","transitioned","complete","onload","loadDone","relayoutOnIntersect","_","observeIntersect","unobserveIntersect","intersectService","parent","initCustomElement","env","experiments","round","screen","availWidth","clientWidth","wowImage","WowImage","intersectionService","getSiteService","getSiteScale","siteRootElement","initWixCustomElementsRegistry","addEventListener","siteService","rest","media","requestUrl","viewerModel","partialViewerModelParam","wixCustomElementsParam","mediaOverrideParam","environmentOverrides","wixCustomElements","mediaServices","partialViewerModel","isViewerMode","experiment","Boolean","buildCustomElementsMediaParams","staticVideoUrl","__imageClientApi__","initCustomElements"],"sourceRoot":""}